<!DOCTYPE html>
<html>
    <head>
        <meta content="IE=edge,chrome=1; charset=UTF-8" http-equiv="X-UA-Compatible">
        <title>sample ol3 Route default (amd)</title>

        <!-- Library OpenLayers 3 -->
        <link rel="stylesheet" href="../../../lib/ol3/ol.css" />

        <!-- Plugin OpenLayers 3 IGN -->
        <link rel="stylesheet" href="../../../dist/ol3/GpPluginOl3-src.css" />

        <!-- requirejs -->
        <script src="../../../lib/require.js"></script>

        <!-- load geoportail-waiting image -->
        <style>
            body {
                background-color: #A4A4A4;
            }
            div#map {
                background-image:url(../resources/geoportail-waiting.gif);
                background-position:center center;
                background-repeat:no-repeat;
                max-width: 800px;
                height: 300px;
                margin: 10px;
            }
            img.marker-route {
                content:url("./../resources/marker.png");
                height: "10px";
            }
            .GPlocationPointMarker {
                content: url('data:image/png;base64,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');
            }
        </style>
    </head>
    <body>
        <h1>
            <a href="http://openlayers.org/"><img src="../resources/logo-ol3.png" alt="OpenLayers3" width="100" /></a>
            <a href="http://www.ign.fr"><img src="../resources/logo-ign.jpg" alt="IGN" width="100" /></a>
        </h1>
        <h3>
            OpenLayers3 - A high-performance, feature-packed library for all your mapping needs.
        </h3>

        <div>
            <p>Ajout d'un widget de calcul d'itinéraire</p>

            <script>
                var map;
                /* global requirejs */
                requirejs.config({
                    "baseUrl" : "../../../src/",
                    "paths": {
                        // lib external
                        "ol" : "../lib/ol3/ol-debug",
                        "proj4"   : "../lib/proj4/proj4",
                        "gp"      : "../lib/gp/GpServices-src",
                        "sortable" : "../lib/sortable/Sortable",
                        "woodman" : "../lib/woodman/woodman-amd"
                    }
                });
                requirejs(
                    ["ol", "gp", "Ol3/Layers/LayerWMTS", "Ol3/Controls/Route", "Ol3/Controls/LocationSelector", "Ol3/Controls/Utils/Markers"],
                    function (ol, Gp, LayerWMTS, Route, LocationSelector, Markers) {
                    // var map;

                    var createMap = function () {
                        // on cache l'image de chargement du Géoportail.
                        document.getElementById("map").style.backgroundImage = "none";

                        // Création de la map
                        map = new ol.Map({
                            target : "map",
                            layers : [
                                new ol.layer.Tile({
                                    source: new ol.source.OSM()
                                })
                            ],
                            view : new ol.View({
                                // center : [271152.61, 6248139.50],
                                center : [-132411.01, 5807806.66],
                                // center : [2, 48],
                                // projection : "EPSG:4326",
                                zoom : 5
                            })
                        });

                        // 1er element : input de depart
                        // on crée une div qui contiendra l'élement (en relatif)
                        var inputDiv1 = document.createElement("div");
                        inputDiv1.style.top = "100px";
                        inputDiv1.style.left = "15px";
                        inputDiv1.style.position = "absolute";
                        var routePoint1 = new LocationSelector({
                            tag : {
                                id : 0,
                                groupId : 1,
                                addOption : true,
                                // type : "departure",
                                markerOpts : {
                                    url : Markers["red"],
                                    offset : Markers.defaultOffset
                                },
                                label : "Départ :"
                            },
                            element : inputDiv1
                        });
                        map.addControl(routePoint1);

                        // 2eme element
                        var inputDiv2 = document.createElement("div");
                        inputDiv2.style.top = "140px";
                        inputDiv2.style.left = "15px";
                        inputDiv2.style.position = "absolute";
                        var routePoint2 = new LocationSelector({
                            tag : {
                                id : 2,
                                groupId : 1,
                                removeOption : true,
                                customMarkerOpts : {
                                    url : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",
                                    offset : [-25.5, -38]
                                },
                                label : ">"
                            },
                            element : inputDiv2
                        });
                        map.addControl(routePoint2);

                        // 3eme element
                        var inputDiv3 = document.createElement("div");
                        inputDiv3.style.top = "180px";
                        inputDiv3.style.left = "15px";
                        inputDiv3.style.position = "absolute";
                        var routePoint3 = new LocationSelector({
                            tag : {
                                id : 1,
                                groupId : 1,
                                removeOption : true,
                                // type : "arrival",
                                markerOpts : {
                                    url : Markers["turquoiseBlue"],
                                    offset : Markers.defaultOffset
                                },
                                label : "Arrivée :"
                            },
                            element : inputDiv3
                        });
                        map.addControl(routePoint3);


                        // var markerDiv = document.createElement("div");
                        // markerDiv.id = "marker";
                        // markerDiv.style["width"] = "20px";
                        // markerDiv.style["height"] = "20px";
                        // markerDiv.style["border"] = "1px solid #088";
                        // markerDiv.style["opacity"] = "0.5";
                        // markerDiv.style["background-color"] = "#0FF";
                        // markerDiv.style["border-radius"] = "10px";

                        var imageDiv = document.createElement("img");
                        imageDiv.src = "data:image/png;base64,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";
                        map.addOverlay(new ol.Overlay({
                            // position : [271152.61, 6248139.50], // chateau vincennes
                            position : [-132411.01, 5807806.66], // la rochelle
                            positioning : 'center-center',
                            element : imageDiv
                            // element : markerDiv
                        }));

                        // var popup =

                    };

                    Gp.Services.getConfig({
                        serverUrl : "./../resources/AutoConf.js",
                        callbackSuffix : "",
                        // apiKey: "jhyvi0fgmnuxvfv0zjzorvdn",
                        timeOut : 20000,
                        onSuccess : createMap
                    });

                });
            </script>

            <!-- map -->
            <div id="map">
            </div>

            <!-- Comment utiliser le plugin avec un exemple -->
            <p>EXEMPLE D'UTILISATION</p>
            <pre>
                <code>
                    window.onload = function () {
                        var map = new ol.Map({
                            layers: [
                                new LayerWMTS({
                                    layer: "GEOGRAPHICALGRIDSYSTEMS.MAPS",
                                })
                            ],
                            target: 'map',
                            view: new ol.View({
                                center: [288074.8449901076, 6247982.515792289],
                                zoom: 5
                            })
                        });
                    }
                </code>
            </pre>

            <!-- Toutes les informations utiles sur ol3 -->
            <p>
                <ul>
                    <li>En savoir plus avec le <a href="http://openlayers.org/en/v3.11.2/doc/quickstart.html">quick start guide</a>,</li>
                    <li>d'autres informations avec <a href="http://openlayers.org/en/v3.11.2/examples/">les exemples</a>,</li>
                    <li>ou aller directement à l'<a href="http://openlayers.org/en/v3.11.2/apidoc/">API documentation</a>.</li>
                </ul>
                Si vous avez des questions, jetez un oeil à la
                <a href="http://stackoverflow.com/questions/tagged/openlayers-3">FAQ</a>.
            </p>
        </div>
    </body>
</html>
