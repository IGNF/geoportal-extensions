/*!
 * @brief French Geoportal Extension for Leaflet
 *
 * This software is released under the licence CeCILL-B (Free BSD compatible)
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-fr.txt
 * @see http://www.cecill.info/
 *
 * @copyright copyright (c) IGN 
 * @license CeCILL-B
 * @author IGN
 * @version 2.2.7
 * @date 18/11/2022
 *
 */
Isocurve=function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=57)}([function(e,t){e.exports=L},function(e,t,o){"use strict";var n={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(e,t){if(0===Object.keys(arguments).length)return"Message indefined !";var o=Array.prototype.slice.call(arguments),n=o.shift(),i=o,r=this[n];try{r=Array.isArray(i)&&i.length>0?r.replace("%var%",i.join(" - ")):r.replace("%var%","%var% (not specified)")}catch(e){}return r}};t.a=n},function(e,t,o){"use strict";function n(e){if(!(this instanceof n))throw new TypeError("ErrorService constructor cannot be called as a function.");var t=e;"string"==typeof e||e instanceof String?(this.message=e,this.status=-1,this.type=n.TYPE_UNKERR):(this.message=t.message||"undefined!?",this.type=t.type,this.status=t.status||-1),this.name="ErrorService",this.stack=(new Error).stack}n.TYPE_SRVERR="SERVICE_ERROR",n.TYPE_USEERR="USAGE_ERROR",n.TYPE_UNKERR="UNKNOWN_ERROR",n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t.a=n},function(e,t,o){"use strict";var n=o(6),i={getLogger:function(e){"true".match(/true/)?n.disableAll():n.enableAll();var t=e||"default";return n.getLogger(t)}};t.a=i},function(e,t,o){"use strict";var n,i={generate:(n=Math.floor(Date.now()),function(){return n++}),name:function(e){var t=null,o=e.lastIndexOf("-");return t=-1===o?e:e.substring(0,o),t},index:function(e){var t=null,o=this.name(e),n=o.lastIndexOf("_");return-1!==n&&(t=o.substring(n+1)),t},uuid:function(e){var t=null,o=e.lastIndexOf("-");return-1!==o&&(t=parseInt(e.substring(o+1),10)),t}};t.a=i},function(e,t,o){"use strict";var n=o(6),i={getLogger:function(e){"true".match(/true/)?n.disableAll():n.enableAll();var t=e||"default";return n.getLogger(t)},disableAll:function(){var e=n.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].disableAll()}},enableAll:function(){var e=n.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].enableAll()}}};t.a=i},function(e,t,o){var n,i;!function(r,s){"use strict";void 0===(i="function"==typeof(n=function(){var e=function(){},t="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function n(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(o){return"debug"===o&&(o="log"),"undefined"!=typeof console&&("trace"===o&&t?i:void 0!==console[o]?n(console,o):void 0!==console.log?n(console,"log"):e)}function s(t,n){for(var i=0;i<o.length;i++){var r=o[i];this[r]=i<t?e:this.methodFactory(r,t,n)}this.log=this.debug}function a(e,t,o){return function(){"undefined"!=typeof console&&(s.call(this,t,o),this[e].apply(this,arguments))}}function c(e,t,o){return r(e)||a.apply(this,arguments)}function l(e,t,n){var i,r=this;t=null==t?"WARN":t;var a="loglevel";function l(){var e;if("undefined"!=typeof window&&a){try{e=window.localStorage[a]}catch(e){}if(void 0===e)try{var t=window.document.cookie,o=t.indexOf(encodeURIComponent(a)+"=");-1!==o&&(e=/^([^;]+)/.exec(t.slice(o))[1])}catch(e){}return void 0===r.levels[e]&&(e=void 0),e}}"string"==typeof e?a+=":"+e:"symbol"==typeof e&&(a=void 0),r.name=e,r.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},r.methodFactory=n||c,r.getLevel=function(){return i},r.setLevel=function(t,n){if("string"==typeof t&&void 0!==r.levels[t.toUpperCase()]&&(t=r.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=r.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==n&&function(e){var t=(o[e]||"silent").toUpperCase();if("undefined"!=typeof window&&a){try{return void(window.localStorage[a]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(a)+"="+t+";"}catch(e){}}}(t),s.call(r,t,e),"undefined"==typeof console&&t<r.levels.SILENT)return"No console available for logging"},r.setDefaultLevel=function(e){t=e,l()||r.setLevel(e,!1)},r.resetLevel=function(){r.setLevel(t,!1),function(){if("undefined"!=typeof window&&a){try{return void window.localStorage.removeItem(a)}catch(e){}try{window.document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},r.enableAll=function(e){r.setLevel(r.levels.TRACE,e)},r.disableAll=function(e){r.setLevel(r.levels.SILENT,e)};var u=l();null==u&&(u=t),r.setLevel(u,!1)}var u=new l,d={};u.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new l(e,u.getLevel(),u.methodFactory)),t};var h="undefined"!=typeof window?window.log:void 0;return u.noConflict=function(){return"undefined"!=typeof window&&window.log===u&&(window.log=h),u},u.getLoggers=function(){return d},u.default=u,u})?n.call(t,o,t,e):n)||(e.exports=i)}()},function(e,t,o){"use strict";var n={normalyzeParameters:function(e){var t=null;if(e){var o=[];for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i||(i=""),o.push(n+"="+i)}t=o.join("&")}return t},normalyzeUrl:function(e,t,o){var n=e;if(e){var i=e.indexOf("?");-1===i&&(n+="?"),-1!==i&&i!==e.length-1&&(n+="&")}return t&&(n+="string"==typeof t?t:this.normalyzeParameters(t)),o&&(n=encodeURIComponent(n)),n},indent:function(e,t){return new Array((e||0)+1).join("\t")+t}};t.a=n},function(e,t,o){"use strict";(function(e){var n=o(5).a.getLogger("config"),i={configuration:null,isConfigLoaded:function(){var t="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==e?e:{};return!(!t.Gp||!t.Gp.Config||0===Object.keys(t.Gp.Config).length)&&(this.configuration=t.Gp.Config,!0)},getLayerId:function(e,t){var o=null;if(this.configuration){var i=this.configuration.layers;for(var r in i)if(i.hasOwnProperty(r)){var s=r.split("$");if(e===s[0]&&s[1]){var a=s[1].split(":");if(s[1].split(";")[1]===t){o=r;break}if(a[2]===t){o=r;break}}}}return o||n.error("ERROR layer id (layer name: "+e+" / service: "+t+") was not found !?"),o},getLayerParams:function(e,t,o){var i={};if(this.configuration){var r=this.getLayerId(e,t);if(r){var s=this.configuration.layers[r],a=s.apiKeys[0];if(o&&o!==a)return void n.error("ERROR different keys ("+o+" !== "+a+") !?");o=o||a,i.key=o,i.url=s.getServerUrl(o),i.version=s.getServiceParams().version,i.styles=s.getDefaultStyle(),i.format=s.getDefaultFormat(),i.projection=s.getDefaultProjection(),i.minScale=s.getMinScaleDenominator(),i.maxScale=s.getMaxScaleDenominator(),i.extent=s.getBBOX(),i.legends=s.getLegends(),i.metadata=s.getMetadata(),i.originators=s.getOriginators(),i.title=s.getTitle(),i.description=s.getDescription(),i.quicklookUrl=s.getQuicklookUrl(),s.wmtsOptions&&(i.tileMatrixSetLimits=s.wmtsOptions.tileMatrixSetLimits);var c=s.getTMSID();if(c){i.TMSLink=c;var l=this.configuration.getTMSConf(c);i.matrixOrigin=l.getTopLeftCorner(),i.nativeResolutions=l.nativeResolutions,i.matrixIds=l.matrixIds,i.tileMatrices=l.tileMatrices}}}return i},getServiceParams:function(e,t,o){var n={};if(this.configuration){var i=this.getLayerId(e,t);if(i){var r=this.configuration.layers[i],s=r.apiKeys[0];if(o){Array.isArray(o)||(o=[o]);for(var a=0;a<o.length;a++)if(o[a]===s){var c=a;break}if(void 0===c)return}var l=o[c]||s;n.key=l,n.url=r.getServerUrl(l),n.version=r.getServiceParams().version,n.extent=r.getBBOX(),n.title=r.getTitle(),n.description=r.getDescription()}}return n},getResolutions:function(){var e=[];return this.configuration&&(e=this.configuration.generalOptions.wgs84Resolutions),e},getTileMatrix:function(e){var t={};return this.configuration&&e&&(t=this.configuration.tileMatrixSets[e.toUpperCase()]),t},getGlobalConstraints:function(e){var t={};if(e){var o=this.configuration.layers[e];t.projection=o.getDefaultProjection(),t.minScale=o.getMinScaleDenominator(),t.maxScale=o.getMaxScaleDenominator(),t.extent=o.getBBOX()}return t}};t.a=i}).call(this,o(15))},function(e,t,o){"use strict";var n,i=o(3),r=o(7),s=o(1),a=o(18),c=o.n(a),l={call:function(e){var t=i.a.getLogger("XHR");if(t.trace("[XHR::call()]"),c.a.polyfill(),!e.url)throw new Error("missing parameter : url is not defined !");if(!e.method)throw new Error("missing parameter : method is not defined !");e.format||(e.format="text");var o={};switch(o.url=e.url,o.data=e.data?e.data:null,o.method=e.method,o.timeOut=e.timeOut||0,o.scope=e.scope||this,o.proxy=e.proxy||null,o.content=e.content||null,o.headers=e.headers||{referer:"http://localhost"},e.method){case"DELETE":case"GET":break;case"PUT":case"POST":o.content=e.content?e.content:"application/x-www-form-urlencoded",o.headers=e.headers?e.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(e.format){case"text":this.__call(o).then((function(o){t.trace(o),e.onResponse.call(this,o)})).catch((function(t){e.onFailure.call(this,t)}));break;case"json":this.__callJSON(o).then((function(o){t.trace(o),e.onResponse.call(this,o)})).catch((function(t){e.onFailure.call(this,t)}));break;case"xml":this.__callXML(o).then((function(o){t.trace(o),e.onResponse.call(this,o)})).catch((function(t){e.onFailure.call(this,t)}));break;default:throw new Error("This output Format is not yet supported !")}},__call:function(e){var t=i.a.getLogger("XHR");return t.trace("[XHR::__call()]"),new Promise((function(n,i){var s="POST"===e.method||"PUT"===e.method?1:0;e.data&&("object"==typeof e.data&&Object.keys(e.data).length||"string"==typeof e.data&&e.data.length)&&!s&&("Geocode"===e.scope.CLASSNAME||"ReverseGeocode"===e.scope.CLASSNAME?e.url=e.url+e.data:e.url=r.a.normalyzeUrl(e.url,e.data)),t.trace("URL = ",e.url);var a=null;if("undefined"==typeof window){var c=o(26),l={headers:{Referer:"https://localhost"}};return e.data&&"string"==typeof e.data&&s&&(l={method:e.method,body:e.data,headers:{"Content-Type":e.content,Referer:"https://localhost"}}),c(e.url,l).then((function(e){if(e.ok)n(e.text());else{var t="Errors Occured on Http Request (status : '"+e.statusText+"' | url : '"+e.url+"')",o=e.status;i({message:t,status:o})}})).catch((function(e){i({message:e,status:-1})}))}if(window.XMLHttpRequest){t.trace("XMLHttpRequest"),(a=new XMLHttpRequest).open(e.method,e.url,!0),a.overrideMimeType=e.content;var u=null;e.timeOut>0&&(t.trace("XHR - TimeOut actif !"),u=window.setTimeout((function(){i({message:"TimeOut Occured on Http Request with XMLHttpRequest !",status:-1})}),e.timeOut)),s&&(t.trace("data = ",e.data),a.setRequestHeader("Content-type",e.content)),a.onerror=function(e){console.log(e),i(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},a.ontimeout=function(e){console.log(e),i(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},a.onreadystatechange=function(e){if(4===a.readyState)if(200===a.status)window.clearTimeout(u),n(a.response);else{var t="Errors Occured on Http Request (status : '"+e.target.statusText+"' | url : '"+e.target.responseURL+"' | response : '"+e.target.response+"')",o=e.target.status;i({message:t,status:o})}};var d=e.data&&s?e.data:null;a.send(d)}else{if(!window.XDomainRequest)throw new Error("CORS not supported");t.trace("XDomainRequest"),(a=new XDomainRequest).open(e.method,e.url),a.overrideMimeType=e.content,e.timeOut>0&&(a.timeout=e.timeout,t.trace("XHR - TimeOut actif !")),s&&a.setRequestHeader("Content-type",e.content),a.onerror=function(){i(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},a.ontimeout=function(){i(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},a.onload=function(e){if(200===a.status)n(a.responseText);else{var t="Errors Occured on Http Request (status : '"+e.target.statusText+"' | url : '"+e.target.responseURL+"')",o=e.target.status;i({message:t,status:o})}};var h=e.data&&s?e.data:null;a.send(h)}}))},__callJSON:function(e){return this.__call(e).then(JSON.parse).catch((function(t){console.log("_callJSON failed on : ",e.url,t)}))},__callXML:function(e){return this.__call(e).then((function(e){var t;"undefined"==typeof window?t=(new(0,o(20).DOMParser)).parseFromString(e,"text/xml"):window.DOMParser?t=(new window.DOMParser).parseFromString(e,"text/xml"):((t=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e));return t})).catch((function(t){console.log("__callXML failed on : ",e.url,t)}))}},u={uuid:(n=Math.floor(Date.now()),function(){return n++}),call:function(e){var t=i.a.getLogger("JSONP");if(t.trace("[JSONP::call ()]"),!e)throw t.error("missing parameter : options !"),new Error("missing parameter : options !");if(!e.url)throw t.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(e.timeOut||(t.info("setting 'options.timeOut' default value"),e.timeOut=0),!e.onResponse)throw t.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var o="string"==typeof e.callbackSuffix?e.callbackSuffix:this.uuid(),n=!1,r=!1,s=e.url.indexOf("callback=");if(-1!==s){n=!0;var a=e.url.indexOf("&",s);-1===a&&(a=e.url.length);var c=e.url.substring(s+9,a);c&&(r=!0,e.callbackName=c,t.info("setting 'options.callbackName' value ("+e.callbackName+") from 'options.url' parameter"))}if(!n){var l=e.url.indexOf("?");-1===l?e.url=e.url+"?callback=":l===e.url.length?e.url=e.url+"callback=":e.url=e.url+"&callback=",t.info("setting callback default key in 'options.url' : "+e.url)}var u=!!e.callbackName||r;if(r||(e.callbackName||(t.info("setting 'options.callbackName' default value"),e.callbackName="callback",(o||""===o)&&(e.callbackName+=o)),e.url=e.url.replace("callback=","callback="+e.callbackName),t.info("setting callback function name in 'options.url' : "+e.url)),e.onTimeOut||(t.info("setting 'options.onTimeOut' default value"),e.onTimeOut=function(){console.log("TimeOut while invoking url : "+e.url)}),!u){var d=this,h=null;e.timeOut>0&&(h=window.setTimeout((function(){window[e.callbackName]=function(){},e.onTimeOut(),d._deleteScript(o)}),e.timeOut)),window[e.callbackName]=function(t){window.clearTimeout(h),e.onResponse(t),d._deleteScript(o)}}this._createScript(o,e.url)},_createScript:function(e,t){var o,n=document.getElementById("results"+e);(o=document.createElement("script")).setAttribute("type","text/javascript"),o.setAttribute("src",t),o.setAttribute("charset","UTF-8"),o.setAttribute("id","results"+e),o.setAttribute("async","true");var i=document.documentElement||document.getElementsByTagName("head")[0];null===n?i.appendChild(o):i.replaceChild(o,n)},_deleteScript:function(e){var t=document.getElementById("results"+e);if(t){var o=t.parentNode||document.documentElement;if(!o)return;o.removeChild(t)}}},d={send:function(e){var t=e||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if("undefined"!=typeof window||"JSONP"!==e.protocol){if("XHR"===e.protocol||"json"===e.format?t.wrap=!1:"JSONP"===e.protocol&&"xml"===e.format&&(t.wrap=!0),t.callback=null,t.output=t.wrap?"json":null,t.wrap){var o={};o.output=t.output,o.callback=t.callback,delete o.callback,t.url=r.a.normalyzeUrl(e.url,o)}switch(t.protocol){case"XHR":"GET"===e.method&&e.nocache&&(t.url=r.a.normalyzeUrl(t.url,{t:(new Date).getTime()})),l.call(t);break;case"JSONP":t.data&&(t.url=r.a.normalyzeUrl(t.url,t.data)),u.call(t);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}else console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS")}},h=o(2),p=o(12),m=o(19);function g(e){if(!(this instanceof g))throw new TypeError(s.a.getMessage("CLASS_CONSTRUCTOR"));for(var t in this.logger=i.a.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(e){console.log("onSuccess - la reponse est la suivante : ",e)},onFailure:function(e){200!==e.status&&e.status?console.log("onFailure - Erreur (",e.status,") : ",e.message):console.log("onFailure : ",e.message)}},e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);if(!this.options.apiKey&&!this.options.serverUrl)throw new Error(s.a.getMessage("PARAM_MISSING","apiKey","serverUrl"));if(this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(e){console.log("onSuccess - la réponse brute du service est la suivante : ",e)}),!!(null===this.options.onSuccess||"function"!=typeof this.options.onSuccess))throw new Error(s.a.getMessage("PARAM_MISSING","onSuccess()"));if(!this.options.serverUrl){p.a.ssl=this.options.ssl;var o=p.a[this.CLASSNAME].url(this.options.apiKey);"string"==typeof o?this.options.serverUrl=o:this.logger.trace("URL par defaut à determiner au niveau du composant...")}switch(this.options.httpMethod="string"==typeof e.httpMethod?e.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(s.a.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(s.a.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol="string"==typeof e.protocol?e.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(s.a.getMessage("PARAM_UNKNOWN","protocol"))}if("undefined"==typeof window&&"JSONP"===this.options.protocol)throw new Error(s.a.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));"JSONP"===this.options.protocol&&(this.options.httpMethod="GET"),this.options.nocache=e.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}g.prototype={constructor:g,call:function(){this.logger.trace("CommonService::call ()");var e=this;function t(t){this.logger.trace("CommonService::onBuildRequest : ",t),this.callService.call(e,i,o)}function o(t){this.logger.trace("CommonService::onCallService : ",t),this.analyzeResponse.call(e,i,n)}function n(e){if(this.logger.trace("CommonService::onAnalyzeResponse : ",e),!e)return i.call(this,new h.a("Analyse de la reponse en échec !?"));this.options.onSuccess.call(this,e)}function i(e){this.logger.trace("CommonService::onError()");var t=e;t instanceof h.a||(t=new h.a(e.message)),this.options.onFailure.call(this,t)}(function(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(e,i,t)}).call(e)},buildRequest:function(e,t){this.logger.error("overwritten method !"),e&&e.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")},callService:function(e,t){var o=null,n=this.request,i=!(!this.options.proxyURL||"XHR"!==this.options.protocol);"Geocode"!==this.CLASSNAME&&"ReverseGeocode"!==this.CLASSNAME&&"AutoComplete"!==this.CLASSNAME&&(this.options.serverUrl=r.a.normalyzeUrl(this.options.serverUrl,{"gp-access-lib":m.version},!1)),i&&("GET"===this.options.httpMethod&&(o=this.options.proxyURL+r.a.normalyzeUrl(this.options.serverUrl,this.request,!0),n=null),"POST"===this.options.httpMethod&&(o=this.options.proxyURL+r.a.normalyzeUrl(this.options.serverUrl,null,!0),n=this.request));var s=this,a={url:o||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:"XHR"!==this.options.protocol,callbackSuffix:this.options.callbackSuffix,data:n,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(o){s.logger.trace("callService::onResponse()");var n=null;if("XHR"===s.options.protocol&&(s.logger.trace("Response XHR",o),n=o),"JSONP"===s.options.protocol){if(s.logger.trace("Response JSON",o),!o)return void e.call(s,new h.a("Le contenu de la reponse est vide !?"));if(o.http){if(200!==o.http.status)return void e.call(s,new h.a({status:o.http.status,message:o.http.error,type:h.a.TYPE_SRVERR}));n=o.xml,s.options.rawResponse&&(n=o)}else n=o}if("function"==typeof s.options.onBeforeParse){var i=s.options.onBeforeParse(n);"string"==typeof i&&(n=i)}s.response=n,t.call(s,n)},onFailure:function(t){s.logger.trace("callService::onFailure()"),t.type=h.a.TYPE_SRVERR,e.call(s,new h.a(t))},onTimeOut:function(){s.logger.trace("callService::onTimeOut()"),e.call(s,new h.a("TimeOut!"))}};d.send(a)},analyzeResponse:function(e,t){this.logger.error("overwritten method !"),e&&e.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")}};t.a=g},function(e,t,o){"use strict";var n=o(5),i=o(8);t.a={check:function(e){var t=n.a.getLogger("checkrightmanagement");if(e){var o=e.key,r=e.resources||[],s=e.services||[];if(0!==r.length){if(0!==s.length){var a={};if(!o){if(!i.a.isConfigLoaded())return void t.warn("WARNING : The 'apiKey' parameter is missing, and the contract key configuration has not been loaded, so impossible to check yours rights !");o=Object.keys(i.a.configuration.generalOptions.apiKeys),t.log(o)}if(i.a.isConfigLoaded()){for(var c=0;c<r.length;c++)for(var l=r[c],u=0;u<s.length;u++){var d=s[u],h=i.a.getServiceParams(l,d,o);h&&0!==Object.keys(h).length?(a[d]||(a[d]=[]),a[d].push(l)):t.warn("WARNING : The contract key configuration has no rights to load this geoportal resource ("+l+") for this service ("+d+") ")}return 0===Object.keys(a).length?void t.warn("WARNING : The contract key configuration has been loaded, and the 'apiKey' parameter has been set, but, there is a problem on the mapping between the contract and the key !"):(a.key=h.key,t.log("right management checked",a),a)}t.warn("WARNING : the contract key configuration has not been loaded, so be carefull !");for(var p={},m=0;m<s.length;m++){var g=s[m];p[g]=[];for(var f=0;f<r.length;f++){var v=r[f];p[g].push(v)}}return p.key=o,t.log("right management not checked",p),p}t.error("WARNING : no parameter 'services' specified !")}else t.error("WARNING : no parameter 'resources' specified !")}else t.error("WARNING : no parameter specified !")}}},function(e,t,o){"use strict";t.a={getGeocodedLocationFreeform:function(e){var t=e.placeAttributes;return t.label?t.label:"PositionOfInterest"===e.type?t.postcode+" "+t.toponym:"StreetAddress"===e.type?(t.housenumber?t.housenumber+" ":"")+t.street+" "+(t.postcode?t.postcode+", ":"")+t.city:"CadastralParcel"===e.type?t.id:"..."},getSuggestedLocationFreeform:function(e){if(e.fullText)return e.fullText;var t=[];return t.push(e.street||""),t.push(e.postalCode||""),t.push(e.commune||""),"PositionOfInterest"===e.type&&(t.push(e.poi||""),t.push(e.kind||"")),t.join(" - ")}}},function(e,t,o){"use strict";var n={ssl:!0,url:function(e,t){return(!1===n.ssl?"http://":"https://")+"wxs.ign.fr".concat("/",e,t)},Alti:{_key:{"elevation-json":"/alti/rest/elevation.json","elevation-xml":"/alti/rest/elevation.xml","profil-json":"/alti/rest/elevationLine.json","profil-xml":"/alti/rest/elevationLine.xml",wps:"/alti/wps"},url:function(e){return{"elevation-json":n.url(e,this._key["elevation-json"]),"elevation-xml":n.url(e,this._key["elevation-xml"]),"profil-json":n.url(e,this._key["profil-json"]),"profil-xml":n.url(e,this._key["profil-xml"]),wps:n.url(e,this._key.wps)}}},ProcessIsoCurve:{_key:"/geoportail/isochrone/rest/1.0.0/isochrone",url:function(e){return n.url(e,this._key)}},AutoComplete:{_key:"/ols/apis/completion",url:function(e){return n.url(e,this._key)}},ReverseGeocode:{_key:"/geoportail/ols",url:function(e){return n.url(e,this._key)}},AutoConf:{_key:{apiKey:"/autoconf",apiKeys:"/autoconf?keys=%KEYS%",aggregate:"/autoconf/id/"},url:function(e){var t="";if(Array.isArray(e)&&e.length>0){t=e[0];for(var o=1;o<e.length;o++)t+=","+e[o]}return{apiKey:n.url(e,this._key.apiKey),apiKeys:n.url(e[0],this._key.apiKeys).replace("%KEYS%",t),aggregate:n.url(e,this._key.aggregate)}}},Geocode:{_key:"/geoportail/ols",url:function(e){return n.url(e,this._key)}},Route:{_key:"/geoportail/itineraire/rest/1.0.0/route",url:function(e){return n.url(e,this._key)}}};t.a=n},function(e,t,o){"use strict";var n={NORTH:"N",SOUTH:"S",EAST:"E",WEST:"O",digitSecond:2,digitDecimal:5,digitRadian:8,roundToDecimal:function(e,t){var o=Math.pow(10,t);return Math.round(e*o)/o},decimalToRadian:function(e){return this.roundToDecimal(.017453292519943295*e,this.digitRadian)},decimalToGrade:function(e){return this.roundToDecimal(1.1111111111111112*e,this.digitRadian)},decimalToDMS:function(e,t,o){e<0&&(e*=-1);var n=Math.floor(e),i=60*(e-n),r=Math.floor(i),s=60*(i-r),a=this.roundToDecimal(s,this.digitSecond),c=n+"° "+r+"' "+a+'" ';return t&&(c+=t),o?{d:n,m:r,s:a,direction:t}:c},decimalLatToDMS:function(e,t){var o=e<0?this.SOUTH:this.NORTH;return this.decimalToDMS(e,o,t)},decimalLonToDMS:function(e,t){var o=e<0?this.WEST:this.EAST;return this.decimalToDMS(e,o,t)},DMSToDecimal:function(e,t,o,n){var i=e+t/60+o/3600;return i=n===this.SOUTH||n===this.WEST?-1*i:i,this.roundToDecimal(i,this.digitDecimal)}};t.a=n},function(e,t,o){"use strict";var n=o(0),i=o.n(n),r=o(5).a.getLogger("icondefault"),s=i.a.Icon.Default.extend({images:{retina:{shadow:"data:image/png;base64,...",color:{blue:"data:image/png;base64,...",orange:"data:image/png;base64,...",red:"data:image/png;base64,...",green:"data:image/png;base64,..."}},shadow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=",color:{blue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",orange:"data:image/png;base64,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",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAASAAAAEgARslrPgAABe5JREFUWMOdlWuIXGcZx3/nPbe5ZWbO2c0a8VIEpSq0io2QBT8FUlIFEbzfokUUKfgxIuSbn+JtYTEQqFQCQmkxVIiNFhcLwZoVtrFNt40ESrPEJju7s/eZM+f+Pn6Y2XVnZ3Zn0/fwcA7veZ/ze5//87zPMf56fJIHGB8Far3n20D79Nz1kU7GXw6G+MD3gdPAKdtxMJQFQJZEaK0bwBXg2Sfmrl87AHJi2LwJnAXOVf3xSrFcoVAuDyzKs4yw3SLY2iTqBC8BP31ibnZ+AHJ1MBIfeK7qeaeqno9l2+g4IQ86ILpvoXIczCMVAFob66wuLYXAmc/PXb/cB3nxsRN7AdfrY2MPe+Pj6Cjufnyk6Aa2XyfshLQ21glarae+8OrsxZ3N7JHoj3Xff9jzx8jWN8hbbdB6tOU5aXOVguNQ98YAfnv1+OTJHYgAPTt7pFY76Xk+2fo6kiSg8wEzLLMr25B32eoqjm0x8b5jpsBzLx6f9LsQARF8Ec7Vq1V0J0CSuM9ZFVxsr47t1RHHxq7XsL06Vq06AEqby5RLReq12lERzvbkEkC+VatWKpapyNtt6JERwfY9DMdmdW2NOwsLrCmDdxYWWFpaIopjbN/rarLLJw8C6rUqID/682MnTEsQgK9XSiV0nHQ17g2rViWOI95tLPOxJ89w4sx3sCvdarr3txnmf/kbqnFE3auTrqzu+OkgwC4WcAuuH0XRpBKhIsJkwbHJN9f79TcVG5tbPHruZ3z8qR/vAAA+8PgpPvf737Eehug8Rbn2gHQl10WE00rgw7ZtmdtVspMH2yKJY/TEBA996YsDVSsilD/0QR76ypfZ3GphFgp9AN3p4FgmAp9UIuIrQw2UpXJdwijGe+SRoQAArTXepz9FEEbdfOzylyxHddfWLEESLbpblrtPtM4AQafJvgARIY8iDMMY8DcM6a5BQiUY99I8H9hJHgSUHZvluVfRaToA2obc/8c/qbg2kqV9/oapyPIcwbinRKSRZnlb53l3R9vhRjGWAYV2i7cuXByIAmBx9l+sz8xQK7jkW1v9EKVI0hQRuWt+9dj7Bfhs0VSfKFZK6CDoq/lKucTya69x/+Y8pWPHcMd8Nu8s8M7lF5j/xa+ZKBVwTdWFbPsZBmaxwGIrINP6J8bzj34G4GTZcf7+kXqFtNns77SlMma5xEaUsBbGhFmGY5rUXBu/6GIpNeBjHz3KRpTw7lZ75ms3bzxudQXg5XaSzLbjZLI8Nka2srLrYLWRqEPdH6Pu2n0f050OaRD0l54yQIS1MELg5wDbEIBfrYbRCxW3MvDfkEyTLi+NavjdKMYn2Ixi2mn28jdu3nil1yCFnl3ZiNO3ozjtNb5DtPihbV+z2okRkfPDWn0uMLUSxhim9Z4AlufRThK20uzGN9/498wOhN0HUfSllShuZnmOKhXZ826kGYbBSicG0ed3S7g7EgRCgaebYYxZLvW/GWGW79HJM9bT7LbAn/oh/8/Jtk0vRkmotUY5zqGlMpSi2cvFt+dfz/dEYrDHmoLxh5Uwxjxy5FAAs1olynJWUn1XMJ7dW3FKGHpN3Y2yXEQwTDVSKuU6NKMEQaa+++brySBkUC5E5LaIXF2LE0zfR7Te11SpRJLlNJK8KSLPDDs76oA9Ti3H+UipVLHIUpggcOF7b73RHg4ZHgkicm0r17OtLMc6Oj5cpnKJXAv3U90Wken9uoAaUZzTS1GGIQxPeLFEI04RuPjkrfnN9wq5vKJ5OxTBrNb2JNtFFPw3lURg6qB+dpBciEguItONOEO5zkDZLoYpInLpB7fmGwdDRp/nS4sZzVQEVS6DCIZjIyIspOQC5xkx1O6/4D7WRuTpRpRhlkrdRlirsxRnIPL8D//z5p2RkH0O497rwt2cRBBUwQWExVwQZGQUPchAWxlmDcG41Eg0Zq1GM9EEoq4KxvyhIA/QaacXs+5z736+O3+YSEamZMduBaKuNFNhU9Q1EV6RwzEOnZOdxnk/7eZie+aQcj3QuLaJegZ46UGc/gcUeTtzDg/o4wAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMi0wOC0xOFQxNDo1MDo1NiswMTowMBZQpF8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTItMDgtMThUMTQ6NTA6NTYrMDE6MDBnDRzjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",green:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wJCgoDDgqHD/MAAAZVSURBVFjDpZZtiFxXGcd/c+69M7PzurvdTTZNGvxQTCJqFSok+MmFQPSDUlsQhBaxWNhorQlWPxSKTYqsFLYGA8VCISDESIpCILYQW4xJNtHGGBooZtl16UrKNrMvM7N3Xu6555zHD7OZ7OzsW/Be/nBnznnO/zzP83/OcxKPv/IOW32KXzj2KFBc/nm7cuvl8IOXD21ql3j8lT9vsOjxfuB7wCHgoAoUCV8BYJsWRGaBc8DpvzwxfnF9kl90kxQ+f9wDXgReyg9kc8VkH4Wg2DUvdpqyXqRcKxOH5l3gZ+89OX5rDZLzqwhe7QfOZAcyB4fSO0h6KbSNqNt6F0lSJcn4WQA+bcyycHehATzz3pPjb6+cp0SEe8jvOdYvsRvPDmQOPpLZjRXLYjRPzYSIuC5EtsliNE9ZL7ItvY2dD+/sSRaDs8Nn9o90kLQ92HvcA87mduT27Mw8QiWuUDMhVuymMC5mPpoj42UYyu0A+M3wmf3D90lEQATgxfT29PDDPTup6jKx08gar6+CNf8XhEW9QEqlGNw16AFnhs/s72+FC6Gw79V+4KXtPUPUbZ3IRR07DVSSQlCkEBRRCdX+zvn5Lq/mohKFoEh2KDO4LB4ULUe+mxpI5RSKMA5xIm0Ug16SKsknjTtMfTxFGIdMfTzFzOIMoVmiGPQCdNjUTY3B9HZEeO5rv9/v+YggwncK6QKxxB3qyQU5aibk7iclvv3YUzz91WfJ+wUALsy+w+sf/opGusFgahuLerFt17BN0l4PQc7v10vmgJ/f98sccCDjZ5mP5jpIvITHYljm+QNH+NaupzrGDg59nc/m9/KDC08TD8UEyqdhG+1xh8PP+eglc0jhZLeXUp4V2yFPPxFQNzWymWwXAYAg7M5+hm/s+yZzzRIpL91hXzc1kioAJ59TQH9C3WOXNlJeitCEfLH3S2sSAFgxPNb7ZXQl7rJ3IiRaCxd9caLFgXUGcdJeyDiDiKBdtC6BE6FhGygv0WUvnsOKRZw0FHDHRg6HdCzWtHXyQZ4bn17HrBKEFdNaAMel0l/xcz5WbOd5hcI4A3BHiWPWaReKuNYOjEOMw2hDggQudpyceL3DC9cqXsZLl7g+9Q8KQYEls9S2FePwEgrbsIhjxuvb+2tJDYx/RXJuXzbI0dRR+xBwypDtyXLrvx9yLbzC9vR2HkoO8J9wkrMzp/nt+Bv0DKbwVUCj0VxxeEAQJKneDRErz/siAk5ONueiJzI7MrAirroe4zJC70NFphem+PnkUWzkUH6CZG9A364iXsKjulTprK98nqV6Fde0F/72/Q8+8hGh8u+fvl/Y89rVWn/tQDaXI6wu3e8ZYYzxLflsjlymU2UN2yAO4zUbVXNeIyLHAHzuJ/w1XY7/mN7mWKUBJHZUy9UttehsMUtYD7EN8/6lZ69fBmiFCxDLuWhBT0b90aN+zm9r/0EfEdfywjLaddRXJ45aYCxa0PjKp53FB0CqN0mzGWFC88/Lz12/sKIzrpjn5FRzLioZZ/B6fMTxQFAkiBY04mS0szOuYKlOHG0g8mazFOGlFGJly0jmfXQ9Rpf1bUT+tG6PX87PiWg+aiDgpbyWpLeARKCIyjHA6JWRG3ZVjxdWojJxpAT8rjkX4We9LSU7KATYhiWu6Bng9OpxtVYCxTHWLEX2XmE6tzGUnyAqx4hj7MrIDd1FsjpcIkJl4oXbYuW8rhqSfUkkduvCSymsdkRzUUmsvLWWp2o9OYqTsWhRb6pcP+ujyzHi5OTVH/8rXJNkLU9EhOrUCxdNzVw1NUN6ILlmsv2MhxhHcy4KgRPr5awr8Z3ghC7r5Uru3oif8YgWNMAb135ys7I+yYbx4O24aiZt5Ej2JjsvGSkPBKJ5rRHGNlLfuuESESqTP7IiLW+UrxBLG0E+aFW3cOrakZuzG5JsHC4BOKUrpuRM64ojTlB+AhGhOa8tMLpZHanN1FOZ/GEIvBlXYvweBSIk+wJ0q7r/8PejN6c3JdnSCevkZLSgtdhWLsSBLmtYdRD+H+ESKlOHZ8XJqbgaExQC4iWD0+58Zerwra2RbM7B8qX8hK7EiBN0WSPC6OoOun5O2NpbnT78kdXunKlbbOQuVqcPX5YtsqgH636M6bIGYbTj/rN5Trb+VKdHLtqme6s6PfLug9j9D/FCc1g2qf7VAAAAAElFTkSuQmCC"}},initialize:function(e,t){i.a.Util.extend(this.options,t);var o=null,n=this.images;switch(e){case"red":o=n.color.red;break;case"green":o=n.color.green;break;case"orange":o=n.color.orange;break;case"blue":o=n.color.blue;break;default:o=n.color.blue}this.options.iconUrl=o,this.options.shadowUrl=n.shadow,i.a.Browser.retina&&(this.options.iconRetinaUrl=o,this.options.shadowRetinaUrl=n.shadow)},_getIconUrl:function(e){return r.trace("OVERWRITTEN L.Icon.Default._getIconUrl("+e+")"),i.a.Icon.prototype._getIconUrl.call(this,e)}});t.a=s},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},function(e,t,o){},function(e,t,o){},function(e,t,o){(function(t,o){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var n;n=function(){"use strict";function e(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,r=void 0,s=void 0,a=function(e,t){m[i]=e,m[i+1]=t,2===(i+=2)&&(s?s(g):_())},c="undefined"!=typeof window?window:void 0,l=c||{},u=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(g,1)}}var m=new Array(1e3);function g(){for(var e=0;e<i;e+=2)(0,m[e])(m[e+1]),m[e]=void 0,m[e+1]=void 0;i=0}var f,v,y,E,_=void 0;function C(e,t){var o=this,n=new this.constructor(I);void 0===n[A]&&L(n);var i=o._state;if(i){var r=arguments[i-1];a((function(){return T(i,n,r,o._result)}))}else k(o,n,e,t);return n}function P(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(I);return R(t,e),t}d?_=function(){return t.nextTick(g)}:u?(v=0,y=new u(g),E=document.createTextNode(""),y.observe(E,{characterData:!0}),_=function(){E.data=v=++v%2}):h?((f=new MessageChannel).port1.onmessage=g,_=function(){return f.port2.postMessage(0)}):_=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(r=e.runOnLoop||e.runOnContext)?function(){r(g)}:p()}catch(e){return p()}}():p();var A=Math.random().toString(36).substring(2);function I(){}function w(t,o,n){o.constructor===t.constructor&&n===C&&o.constructor.resolve===P?function(e,t){1===t._state?b(e,t._result):2===t._state?O(e,t._result):k(t,void 0,(function(t){return R(e,t)}),(function(t){return O(e,t)}))}(t,o):void 0===n?b(t,o):e(n)?function(e,t,o){a((function(e){var n=!1,i=function(e,t,o,n){try{e.call(t,o,n)}catch(e){return e}}(o,t,(function(o){n||(n=!0,t!==o?R(e,o):b(e,o))}),(function(t){n||(n=!0,O(e,t))}),e._label);!n&&i&&(n=!0,O(e,i))}),e)}(t,o,n):b(t,o)}function R(e,t){if(e===t)O(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(n=t),null===n||"object"!==i&&"function"!==i)b(e,t);else{var o=void 0;try{o=t.then}catch(t){return void O(e,t)}w(e,t,o)}var n,i}function S(e){e._onerror&&e._onerror(e._result),G(e)}function b(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&a(G,e))}function O(e,t){void 0===e._state&&(e._state=2,e._result=t,a(S,e))}function k(e,t,o,n){var i=e._subscribers,r=i.length;e._onerror=null,i[r]=t,i[r+1]=o,i[r+2]=n,0===r&&e._state&&a(G,e)}function G(e){var t=e._subscribers,o=e._state;if(0!==t.length){for(var n=void 0,i=void 0,r=e._result,s=0;s<t.length;s+=3)n=t[s],i=t[s+o],n?T(o,n,i,r):i(r);e._subscribers.length=0}}function T(t,o,n,i){var r=e(n),s=void 0,a=void 0,c=!0;if(r){try{s=n(i)}catch(e){c=!1,a=e}if(o===s)return void O(o,new TypeError("A promises callback cannot return that same promise."))}else s=i;void 0!==o._state||(r&&c?R(o,s):!1===c?O(o,a):1===t?b(o,s):2===t&&O(o,s))}var x=0;function L(e){e[A]=x++,e._state=void 0,e._result=void 0,e._subscribers=[]}var D=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(I),this.promise[A]||L(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&b(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var o=this._instanceConstructor,n=o.resolve;if(n===P){var i=void 0,r=void 0,s=!1;try{i=e.then}catch(e){s=!0,r=e}if(i===C&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(o===M){var a=new o(I);s?O(a,r):w(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new o((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,o){var n=this.promise;void 0===n._state&&(this._remaining--,2===e?O(n,o):this._result[t]=o),0===this._remaining&&b(n,this._result)},e.prototype._willSettleAt=function(e,t){var o=this;k(e,void 0,(function(e){return o._settledAt(1,t,e)}),(function(e){return o._settledAt(2,t,e)}))},e}(),M=function(){function t(e){this[A]=x++,this._result=this._state=void 0,this._subscribers=[],I!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){R(e,t)}),(function(t){O(e,t)}))}catch(t){O(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var o=this.constructor;return e(t)?this.then((function(e){return o.resolve(t()).then((function(){return e}))}),(function(e){return o.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return M.prototype.then=C,M.all=function(e){return new D(this,e).promise},M.race=function(e){var t=this;return n(e)?new t((function(o,n){for(var i=e.length,r=0;r<i;r++)t.resolve(e[r]).then(o,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},M.resolve=P,M.reject=function(e){var t=new this(I);return O(t,e),t},M._setScheduler=function(e){s=e},M._setAsap=function(e){a=e},M._asap=a,M.polyfill=function(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=M},M.Promise=M,M},e.exports=n()}).call(this,o(25),o(15))},function(e){e.exports=JSON.parse('{"_from":"geoportal-access-lib@3.2.0","_id":"geoportal-access-lib@3.2.0","_inBundle":false,"_integrity":"sha512-914Yk0C3mnYI+X56Y40t4OJwBiZ1nEbW8D9Dse4WcS54Au8ZpkZ9Ep1efNYMxC5618zqn7r4VvzF58Xa+BqzEQ==","_location":"/geoportal-access-lib","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"geoportal-access-lib@3.2.0","name":"geoportal-access-lib","escapedName":"geoportal-access-lib","rawSpec":"3.2.0","saveSpec":null,"fetchSpec":"3.2.0"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/geoportal-access-lib/-/geoportal-access-lib-3.2.0.tgz","_shasum":"7a707b75743f01b5465cc72d1316f13f8b87df7a","_spec":"geoportal-access-lib@3.2.0","_where":"/home/JPBazonnais/Projets/API/geoportal-extensions","author":{"name":"IGNF"},"bugs":{"url":"https://github.com/IGNF/geoportal-access-lib/issues"},"bundleDependencies":false,"date":"04/10/2022","dependencies":{"es6-promise":"^4.2.4","node-fetch":"^2.6.1","xmldom":"^0.1.27"},"deprecated":false,"description":"French Geoportal resources access library","devDependencies":{"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2","chai":"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2","eslint":"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0","glob":"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0","loglevel":"^1.6.1","mocha":"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0","mochawesome":"^6.2.1","nyc":"^15.1.0","path":"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0","sinon":"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8","webpack":"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},"homepage":"https://github.com/IGNF/geoportal-access-lib#readme","keywords":["geoportail","webservice","javascript","es6"],"license":"CECILL-B","main":"dist/GpServices-src.js","module":"src/Gp.js","name":"geoportal-access-lib","nyc":{"include":["src/**/*.js"],"instrument":false,"sourceMap":false},"optionalDependencies":{},"peerDependencies":{},"repository":{"type":"git","url":"git+https://github.com/IGNF/geoportal-access-lib.git"},"scripts":{"build":"webpack --mode=none","build:dev":"webpack --mode=development","build:prod":"webpack --mode=production","clean":"echo \\"Warning: no yet implemented!\\" && exit 0","cover":"nyc --reporter=lcov --reporter=text npm run test","doc":"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open","eslint":"eslint src/","sample":"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path \'/dist/\' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path \'/dist/\' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path \'/dist/\' --port 9001 --open","setup":"npm install","test":"mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob \\"test_*.js\\" test/spec/","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js","test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js"},"version":"3.2.0"}')},function(e,t){e.exports=void 0},function(e,t,o){"use strict";var n=o(2),i=o(1);function r(){if(!(this instanceof r))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}r.prototype={constructor:r};var s=r;function a(){if(!(this instanceof a))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}a.prototype={constructor:a};var c=a;function l(){if(!(this instanceof l))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}function u(e,t){var o=new c;if(e.geometry&&"Point"===e.geometry.type&&(o.position={lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]}),e.properties){for(var n in e.properties)"_score"===n?o.accuracy=e.properties[n]:"_type"===n?"address"===e.properties[n]?o.type="StreetAddress":"poi"===e.properties[n]?o.type="PositionOfInterest":"parcel"===e.properties[n]&&(o.type="CadastralParcel"):o.placeAttributes[n]=e.properties[n];"address"===e.properties._type&&(o.matchType=void 0!==e.properties.number&&null!==e.properties.number?"street number":"street")}t.locations.push(o)}l.prototype={constructor:l,parse:function(e){var t=new s;const o=JSON.parse(e);if("FeatureCollection"===o.type)for(var r=0;r<o.features.length;++r)u(o.features[r],t);else{if("Feature"!==o.type){if("SERVICE_ERROR"===o.type)return{exceptionReport:o};var a=i.a.getMessage("SERVICE_RESPONSE_ANALYSE",o.type);throw new n.a({message:a,type:n.a.TYPE_UNKERR,status:200})}u(o,t)}return t}};var d=l,h={build:function(e){var t=null;if(e.response){if(e.rawResponse)t=e.response;else{try{if(!(t=(new d).parse(e.response)))throw new Error("L'analyse de la réponse du service !?")}catch(t){var o=t.message;return"string"==typeof e.response?o+="('"+e.response+"')":o+="('"+e.response.documentElement.innerHTML+"')",void e.onError.call(e.scope,new n.a({message:i.a.getMessage("SERVICE_RESPONSE_ANALYSE",o),type:n.a.TYPE_UNKERR,status:-1}))}if(t.exceptionReport)return void e.onError.call(e.scope,new n.a({message:i.a.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:n.a.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,t)}else e.onError.call(e.scope,new n.a({message:i.a.getMessage("SERVICE_RESPONSE_EMPTY"),type:n.a.TYPE_SRVERR,status:-1}))}};t.a=h},function(e,t,o){"use strict";var n=o(3),i=o(1);function r(e){if(!(this instanceof r))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=e||{},!this.options.geocodeMethod||"search"!==this.options.geocodeMethod&&"reverse"!==this.options.geocodeMethod)throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=void 0!==this.options?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}r.CLASSNAME="GeocodeParamREST",r.prototype={constructor:r,getFilters:function(){var e={};for(var t in this.filters)this.filters.hasOwnProperty(t)&&(e[t]=this.filters[t]);return e},getIndex:function(){return void 0===this.index?null:"StreetAddress"===this.index?"address":"CadastralParcel"===this.index?"parcel":"PositionOfInterest"===this.index?"poi":"location"===this.index?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}},r.prototype.getParams=function(){var e=[];"search"===this.geocodeMethod&&e.push({k:"q",v:this.query}),this.index&&e.push({k:"index",v:this.getIndex()}),"reverse"===this.geocodeMethod&&e.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(e.push({k:"lon",v:this.lon}),e.push({k:"lat",v:this.lat})),this.maxResp&&e.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&e.push({k:"returntruegeometry",v:this.returnTrueGeometry});const t=this.getFilters();for(var o in t)e.push({k:o,v:t[o]});return e};var s=r;function a(e){if(this.logger=n.a.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof a))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!e)throw new Error(i.a.getMessage("PARAM_EMPTY","options"));this.settings=e}a.prototype={requestString:null,constructor:a,processRequestString:function(){var e="";const t=new s(this.settings).getParams();for(var o=0;o<t.length;o++){var n=t[o];e&&(e+="&"),e+=n.k+"="+n.v}if(!this.settings.geocodeMethod||"search"!==this.settings.geocodeMethod&&"reverse"!==this.settings.geocodeMethod)throw new Error("Error geocodeMethod not valid");return this.requestString="?"+e,this.logger.trace(this.requestString),this.requestString}};var c=a,l={build:function(e){var t=n.a.getLogger("GeocodeRequestFactory");t.trace(["GeocodeRequestFactory::build()"]);var o=new c(e||{});if(!o.processRequestString())throw new Error("Error process request (rest) !");var i=o.requestString;return t.trace(i),i}};t.a=l},,function(e,t,o){"use strict";var n=o(28),i=o(27),r=o(0),s=o.n(r),a=(o(16),o(35),o(17),o(36),o(5)),c=o(10),l=o(4),u=o(11),d=a.a.getLogger("LocationSelectorDOM"),h={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.className=this._addUID("GPlocationPoint"),e.className+=" GPwidget",e},_createLocationPointElement:function(e,t){var o=document.createElement("div");return o.id=this._addUID("GPlocationPoint_"+e),o.className=t?"GPflexInput GPlocationStageFlexInput":"GPflexInput GPlocationStageFlexInputHidden",o.style.cssText="",o},_createLocationPointLabelElement:function(e,t){var o=this,n=document.createElement("label");return n.id=this._addUID("GPlocationOriginLabel_"+e),n.htmlFor=this._addUID("GPlocationOrigin_"+e),n.innerHTML=t,n.addEventListener("click",(function(e){for(var t=l.a.index(this.id),n=document.getElementsByClassName(o._addUID("GPlocationPoint")),i=0;i<n.length;i++){var r=n[i].childNodes[0].id,s=l.a.index(r);document.getElementById(o._addUID("GPlocationPoint_"+s)).style.cssText=""}document.getElementById(o._addUID("GPlocationOriginCoords_"+t)).value="",document.getElementById(o._addUID("GPlocationOrigin_"+t)).value="",document.getElementById(o._addUID("GPlocationPoint_"+t)).style.cssText="",document.getElementById(o._addUID("GPlocationOriginPointer_"+t)).checked=!1,document.getElementById(o._addUID("GPlocationOrigin_"+t)).className="GPlocationOriginVisible",document.getElementById(o._addUID("GPlocationOriginCoords_"+t)).className="GPlocationOriginHidden",document.getElementById(o._addUID("GPlocationStageRemove_"+t))&&(document.getElementById(o._addUID("GPlocationStageRemove_"+t)).className="GPlocationStageRemove"),document.getElementById(o._addUID("GPlocationStageAdd"))&&(document.getElementById(o._addUID("GPlocationStageAdd")).className=""),o.onLocationClearPointClick(e)})),n},_createLocationAutoCompleteteInputElement:function(e){var t=this,o=document.createElement("input");return o.id=this._addUID("GPlocationOrigin_"+e),o.className="GPlocationOriginVisible",o.type="text",o.placeholder="Saisir une adresse",o.autocomplete="off",o.addEventListener("keyup",(function(e){var o=e.which||e.keyCode;if(13!==o&&10!==o&&38!==o&&40!==o){var n=l.a.index(this.id);document.getElementById(t._addUID("GPlocationOrigin_"+n)).value.length>2?document.getElementById(t._addUID("GPlocationAutoCompleteList_"+n)).style.display="block":document.getElementById(t._addUID("GPlocationAutoCompleteList_"+n)).style.display="none",t.onAutoCompleteSearchText(e)}})),o.addEventListener("keydown",(function(o){var n=o.which||o.keyCode,i=document.getElementById(t._addUID("GPlocationAutoCompleteList_"+e));if(i){var r=i.getElementsByClassName("GPautoCompleteProposal current"),s=i.getElementsByClassName("GPautoCompleteProposal"),a=s.length;if(a){var c=null;if(!r.length)return(c=s[0]).className="GPautoCompleteProposal current",c.style.color="#000000",void(c.style["background-color"]="#CEDBEF");c=r[0];var u=parseInt(l.a.index(c.id),10),h=u===a-1?s[0]:s[u+1],p=0===u?s[a-1]:s[u-1];switch(c.style["background-color"]="",c.style.color="",p.style["background-color"]="",p.style.color="",h.style["background-color"]="",h.style.color="",n){case 38:d.log("arrow up"),c.className="GPautoCompleteProposal",p.className="GPautoCompleteProposal current",p.style.color="#000000",p.style["background-color"]="#CEDBEF";break;case 40:d.log("arrow down"),c.className="GPautoCompleteProposal",h.className="GPautoCompleteProposal current",h.style.color="#000000",h.style["background-color"]="#CEDBEF";break;case 13:d.log("enter"),c.click(o)}c.focus()}}})),o},_createLocationCoordinateInputElement:function(e){var t=this,o=document.createElement("input");return o.id=this._addUID("GPlocationOriginCoords_"+e),o.className="GPlocationOriginHidden",o.type="text",o.disabled=!1,o.addEventListener("click",(function(){var e=l.a.index(this.id);document.getElementById(t._addUID("GPlocationOriginLabel_"+e)).click()})),o},_createLocationPointerShowInputElement:function(e){var t=document.createElement("input");return t.id=this._addUID("GPlocationOriginPointer_"+e),t.type="checkbox",t},_createLocationPointerInputElement:function(e){var t=this,o=document.createElement("label");return o.id=this._addUID("GPlocationOriginPointerImg_"+e),o.htmlFor=this._addUID("GPlocationOriginPointer_"+e),o.className="GPlocationOriginPointerImg",o.title="Pointer un lieu sur la carte",o.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var o,n,i,r=l.a.index(this.id),s=document.getElementsByClassName(t._addUID("GPlocationPoint"));for(o=0;o<s.length;o++)n=s[o].childNodes[0].id,r!==(i=l.a.index(n))&&(document.getElementById(t._addUID("GPlocationOriginPointer_"+i)).checked=!1,"Pointer un lieu sur la carte"===document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).value&&(document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+i)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).className="GPlocationOriginHidden"));if(document.getElementById(t._addUID("GPlocationOriginPointer_"+r)).checked){for(document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).value="",o=0;o<s.length;o++)n=s[o].childNodes[0].id,i=l.a.index(n),document.getElementById(t._addUID("GPlocationPoint_"+i)).style.cssText="";document.getElementById(t._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+r)).className="GPlocationStageRemove"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className=""),document.getElementById(t._addUID("GPlocationOriginPointer_"+r)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+r)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).className="GPlocationOriginHidden"}else{for(document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).value="Pointer un lieu sur la carte",o=0;o<s.length;o++)n=s[o].childNodes[0].id,r===(i=l.a.index(n))?document.getElementById(t._addUID("GPlocationPoint_"+i)).style.cssText="":document.getElementById(t._addUID("GPlocationPoint_"+i)).style.display="none";document.getElementById(t._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+r)).className="GPlocationOriginHidden"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationOriginHidden"),document.getElementById(t._addUID("GPlocationOriginPointer_"+r)).checked=!0,document.getElementById(t._addUID("GPlocationOrigin_"+r)).className="GPlocationOriginHidden",document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).disabled=!0}t.onActivateMapPointClick(e)})),o},_createLocationRemovePointElement:function(e){var t=this,o=document.createElement("div");return o.id=this._addUID("GPlocationStageRemove_"+e),o.className="GPlocationStageRemove",o.title="Supprimer l'étape",o.addEventListener("click",(function(o){var n=document.getElementsByClassName(t._addUID("GPlocationPoint")),i=n.length-1,r=n[0].childNodes[0].id,s=n[i].childNodes[0].id,a=l.a.index(r),c=l.a.index(s);if(e!==a&&e!==c){var u=l.a.index(this.id);document.getElementById(t._addUID("GPlocationPoint_"+u)).className="GPflexInput GPlocationStageFlexInputHidden",document.getElementById(t._addUID("GPlocationOrigin_"+u)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+u)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+u)).value="",document.getElementById(t._addUID("GPlocationOriginCoords_"+u)).className="GPlocationOriginHidden",document.getElementById(t._addUID("GPlocationStageAdd")).style.display="",t.onLocationRemovePointClick(o)}})),o},_createLocationAddPointElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPlocationStageAdd"),t.title="Ajouter une étape",t.addEventListener("click",(function(t){for(var o=1,n=0,i=document.getElementsByClassName(e._addUID("GPlocationPoint")),r=1;r<i.length-1;r++){var s=i[r].childNodes[0].id,a=l.a.index(s);document.getElementById(e._addUID("GPlocationPoint_"+a))&&("GPflexInput GPlocationStageFlexInputHidden"===document.getElementById(e._addUID("GPlocationPoint_"+a)).className?1===o&&(o=a):n++)}o<i.length&&(document.getElementById(e._addUID("GPlocationPoint_"+o)).className="GPflexInput GPlocationStageFlexInput"),4===n&&(document.getElementById(e._addUID("GPlocationStageAdd")).style.display="none"),e.onLocationAddPointClick(t)})),t},_createLocationAutoCompleteResultElement:function(e){var t=this,o=document.createElement("div");return o.id=this._addUID("GPlocationAutoCompleteList_"+e),o.className="GPadvancedAutoCompleteList",o.addEventListener?o.addEventListener("click",(function(o){t.onAutoCompletedResultsItemClick(o),document.getElementById(t._addUID("GPlocationAutoCompleteList_"+e)).style.display="none"}),!1):o.attachEvent&&o.attachEvent("onclick",(function(o){t.onAutoCompletedResultsItemClick(o),document.getElementById(t._addUID("GPlocationAutoCompleteList_"+e)).style.display="none"})),o},_createLocationAutoCompletedLocationElement:function(e,t,o){var n=document.getElementById(this._addUID("GPlocationAutoCompleteList_"+e)),i=document.createElement("div");i.id=this._addUID("AutoCompletedLocation_"+o),i.className="GPautoCompleteProposal",i.innerHTML=u.a.getSuggestedLocationFreeform(t),n.appendChild(i)},GPdisplayCoordinate:function(e){for(var t=document.getElementsByClassName(this._addUID("GPlocationPoint")),o=0;o<t.length;o++){var n=t[o].childNodes[0].id,i=l.a.index(n);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+i)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+i)).value=e,document.getElementById(this._addUID("GPlocationOriginCoords_"+i)).disabled=!1;for(var r=0;r<t.length;r++){n=t[r].childNodes[0].id;var s=l.a.index(n);document.getElementById(this._addUID("GPlocationPoint_"+s)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+s)).className="GPlocationStageRemove")}return document.getElementById(this._addUID("GPlocationOriginPointer_"+i)).checked=!1,void(document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className=""))}}}},p=o(13),m=o(14),g=a.a.getLogger("locationselector"),f=s.a.Control.extend({includes:h,options:{position:"topleft",tag:{id:0,unique:null,label:">",color:"blue",display:!0,addOption:!1,removeOption:!1},disableReverse:!1,displayInfo:!0,autocompleteOptions:{},reverseGeocodeOptions:{}},initialize:function(e){s.a.Util.setOptions(this,e),this._uid=this.options.tag.unique||null,this._activeDragAndDrop=!1,this._pressedKeyOnDragAndDrop=!1,this._map=null,this._inputsContainer=null,this._inputLabelContainer=null,this._inputAutoCompleteContainer=null,this._inputShowPointerContainer=null,this._inputCoordinateContainer=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedLocations=[],this._currentLocation=null,this._marker=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement(),this._container=this._uid?this._initLayout():null},onAdd:function(){this._uid=l.a.generate();var e=this._initLayout();return s.a.DomEvent.disableClickPropagation(e).disableScrollPropagation(e),e},onRemove:function(){},getCoordinate:function(){return this._coordinate},setCoordinate:function(e){this._displayResultOfCoordinate(e)},setMap:function(e){this._map||(this._map=e)},clear:function(){this._setCursor(),this._setMarker(),this._clearResults(),this._inputLabelContainer.click()},dragging:function(e){this._marker&&(e?this._marker.dragging.enable():this._marker.dragging.disable())},_initLayout:function(){var e=this.options.tag.id,t=this._createMainContainerElement(),o=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);t.appendChild(o);var n=this._inputLabelContainer=this._createLocationPointLabelElement(e,this.options.tag.label);o.appendChild(n);var i=this._inputAutoCompleteContainer=this._createLocationAutoCompleteteInputElement(e);o.appendChild(i);var r=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);o.appendChild(r);var s=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);o.appendChild(s);var a=this._createLocationPointerInputElement(e);if(o.appendChild(a),this.options.tag.addOption){var c=this._createLocationAddPointElement();o.appendChild(c)}if(this.options.tag.removeOption){var l=this._createLocationRemovePointElement(e);o.appendChild(l)}var u=this._suggestedContainer=this._createLocationAutoCompleteResultElement(e);return t.appendChild(u),t},_checkRightsManagement:function(){var e=null,t=null;t=this.options.reverseGeocodeOptions.apiKey,(e=this.options.reverseGeocodeOptions.index?this.options.reverseGeocodeOptions.index:"")||(e="StreetAddress"),"location"===e?e=["StreetAddress","PositionOfInterest","CadastralParcel"]:Array.isArray(e)||(e=[e]);var o=c.a.check({key:t||this.options.apiKey,resources:e,services:["ReverseGeocode"]});t=this.options.autocompleteOptions.apiKey,(e=this.options.autocompleteOptions.type?this.options.autocompleteOptions.type:[])&&0!==e.length||(e=["StreetAddress","PositionOfInterest"]);var n=c.a.check({key:t||this.options.apiKey,resources:e,services:["AutoCompletion"]});o||n||(this._noRightManagement=!0),n&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=n.AutoCompletion,this._resources.AutoCompletion.key=n.key),o&&(this._resources.ReverseGeocode={},this._resources.ReverseGeocode.resources=o.ReverseGeocode,this._resources.ReverseGeocode.key=o.key)},_setLabel:function(e){this._inputAutoCompleteContainer.value=e||""},_setCoordinate:function(e){this._coordinate=e;var t;t=p.a.roundToDecimal(e.lat,4);var o=p.a.roundToDecimal(e.lng,4)+" , "+t;this.GPdisplayCoordinate(o)},_setPosition:function(e){g.log("_setPosition()",e),this._map.panTo(s.a.latLng(e))},_setMarker:function(e,t,o){if(g.log("_setMarker()",e,t,o),!this._activeDragAndDrop){var n=this._map;if(null!=this._marker&&(this._marker.off("mousedown",this.onMouseDownMarker,this),this._marker.off("dragstart",this.onStartDragMarker,this),this._marker.off("drag",this.onDragMarker,this),this._marker.off("dragend",this.onEndDragMarker,this),n.removeLayer(this._marker),this._marker=null),e){var i={icon:new m.a(this.options.tag.color),draggable:!0,clickable:!0,zIndexOffset:1e3};if(this._marker=s.a.marker(s.a.latLng(e),i),this._marker.on("mousedown",this.onMouseDownMarker,this),this._marker.on("dragstart",this.onStartDragMarker,this),this._marker.on("drag",this.onDragMarker,this),this._marker.on("dragend",this.onEndDragMarker,this),this._marker.addTo(n),o){var r=null;r="string"!=typeof t?"GeocodedLocation"===t.service?u.a.getGeocodedLocationFreeform(t.location):"SuggestedLocation"===t.service?u.a.getSuggestedLocationFreeform(t.location):"sans informations.":t,this._marker.bindPopup(r)}}}},_setCursor:function(e){var t=this._map.getContainer();t.style.cursor=e||null},_clearResults:function(){this._currentLocation=null,this._coordinate=null,this._clearSuggestedLocation()},_clearSuggestedLocation:function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},_requestAutoComplete:function(e){if(g.log("_requestAutoComplete()",e),e&&0!==Object.keys(e).length&&e.text)if(g.log(e),this._noRightManagement)g.log("no rights for all service !?");else if(this._resources.AutoCompletion){var t=this._resources.AutoCompletion.resources;if(t&&0!==Object.keys(t).length){var o=this._resources.AutoCompletion.key,i={};s.a.Util.extend(i,this.options.autocompleteOptions),s.a.Util.extend(i,e),s.a.Util.extend(i,{apiKey:i.apiKey||this.options.apiKey||o}),g.log(i),new n.a(i).call()}}else g.log("no rights for this service !?")},_fillAutoCompletedLocationListContainer:function(e){if(g.log("_fillAutoCompletedLocationListContainer()",e),e&&0!==e.length){var t=this._suggestedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var o=0;o<e.length;o++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[o],o);this._suggestedLocations=e}},_requestReverseGeocode:function(e){if(g.log("_requestReverseGeocode()",e),e&&0!==Object.keys(e).length&&e.searchGeometry&&0!==Object.keys(e.searchGeometry).length)if(this._noRightManagement)g.log("no rights for all service !?");else if(this._resources.ReverseGeocode){var t=this._resources.ReverseGeocode.resources;if(t&&0!==Object.keys(t).length){var o=this._resources.ReverseGeocode.key,n={};s.a.Util.extend(n,this.options.reverseGeocodeOptions),s.a.Util.extend(n,e),s.a.Util.extend(n,{returnFreeForm:!0,index:"StreetAddress"}),s.a.Util.extend(n,{apiKey:n.apiKey||this.options.apiKey||o}),g.log(n),new i.a(n).call()}}else g.log("no rights for this service !?")},_displayResultOfCoordinate:function(e){this._setCoordinate(e),this._setMarker(e,null,!1),g.log(this.getCoordinate()),this.onActivateMapPointClick()},_displayResultOfLabel:function(e){var t=u.a.getGeocodedLocationFreeform(e);this._setCoordinate({lat:e.position.lat,lng:e.position.lon}),this._setLabel(t);var o={service:"GeocodedLocation",location:e};this._setMarker(e.position,o,!0),this._inputShowPointerContainer.checked=!1,this._inputAutoCompleteContainer.className="GPlocationOriginVisible",this._inputCoordinateContainer.className="GPlocationOriginHidden",this.onActivateMapPointClick()},onAutoCompleteSearchText:function(e){g.log("onAutoCompleteSearchText()",e);var t=e.target.value;if(t)if(this._noRightManagement)g.log("no rights for this service !?");else if(this._currentLocation=t,!(t.length<3)){var o=this;this._requestAutoComplete({text:t,maximumResponses:5,onSuccess:function(e){if(g.log(e),e){var t=e.suggestedLocations;o._fillAutoCompletedLocationListContainer(t)}},onFailure:function(e){o._clearSuggestedLocation(),g.log(e.message)}})}},onAutoCompletedResultsItemClick:function(e){g.log("onAutoCompletedResultsItemClick()",e);var t=l.a.index(e.target.id);if(g.log(t),g.log(this._suggestedLocations[t]),t){var o={lon:this._suggestedLocations[t].position.x,lat:this._suggestedLocations[t].position.y},n={service:"SuggestedLocation",location:this._suggestedLocations[t]},i=u.a.getSuggestedLocationFreeform(this._suggestedLocations[t]);this._setLabel(i),this._setPosition(o),this._setMarker(o,n,this.options.displayInfo),this._coordinate=o}},onActivateMapPointClick:function(e){g.trace("onActivateMapPointClick()",e);var t=this._map;this._inputShowPointerContainer.checked?this._activeDragAndDrop||(t.on("click",this.onMouseMapClick,this),this._setCursor("crosshair"),this._setMarker(),this._clearResults()):this._activeDragAndDrop||(t.off("click",this.onMouseMapClick,this),this._setCursor())},onLocationClearPointClick:function(e){g.log("onLocationClearPointClick",e),this._setCursor(),this._setMarker(),this._clearResults(),this._inputAutoCompleteContainer.focus()},onLocationRemovePointClick:function(e){g.log("onLocationRemovePointClick",e),this._setCursor(),this._setMarker(),this._clearResults()},onLocationAddPointClick:function(e){g.log("onLocationAddPointClick",e)},onMouseMapClick:function(e){g.log("onMouseMapClick",e);var t=e.latlng;if(this.options.disableReverse||this._noRightManagement)this._displayResultOfCoordinate(t);else{var o=this;this._requestReverseGeocode({searchGeometry:{type:"Circle",coordinates:[t.lng,t.lat],radius:50},maximumResponses:1,onSuccess:function(e){if(g.log(e),0!==e.locations.length){var n=e.locations[0];o._displayResultOfLabel(n)}else o._displayResultOfCoordinate(t)},onFailure:function(e){g.log(e.message),o._displayResultOfCoordinate(t)}})}},onStartDragMarker:function(){this._marker&&(this._activeDragAndDrop=!0,this._inputShowPointerContainer.checked=!0,this._inputAutoCompleteContainer.className="GPlocationOriginHidden",this._inputCoordinateContainer.className="GPlocationOriginVisible",this._marker.unbindPopup(),this._setLabel(),this._clearResults())},onDragMarker:function(){if(this._marker){this._activeDragAndDrop=!1,this._inputShowPointerContainer.checked=!0;var e=this._marker.getLatLng();this._setCoordinate(e)}},onEndDragMarker:function(){if(this._marker){this._inputShowPointerContainer.checked=!0;var e=this._marker.getLatLng();this._pressedKeyOnDragAndDrop?this._setCoordinate(e):(g.log("No key pressed, so autocomplete solution !"),this.onMouseMapClick({latlng:e})),this._activeDragAndDrop=!1,this._pressedKeyOnDragAndDrop=!1}},onMouseDownMarker:function(e){this._marker&&(this._pressedKeyOnDragAndDrop=e.originalEvent.ctrlKey)}});t.a=f},function(e,t){var o,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(o===setTimeout)return setTimeout(e,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:r}catch(e){o=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=a(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];l.push(new m(e,t)),1!==l.length||u||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=void 0},function(e,t,o){"use strict";var n=o(3),i=o(1),r=o(2),s=o(9),a=o(22),c=o(21);function l(e){if(!(this instanceof l))throw new TypeError(i.a.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=n.a.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var t=this.patchOptionConvertor(e);if(t.serverUrl=t.serverUrl||"https://wxs.ign.fr/calcul/geoportail/geocodage/rest/0.1/reverse",s.a.apply(this,[t]),!t.searchGeometry)throw new Error(i.a.getMessage("PARAM_MISSING","searchGeometry"));if(this.options.searchGeometry=t.searchGeometry,t.index||(this.options.index=t.index="StreetAddress"),t.filters)for(var o=Object.keys(t.filters),r=0;r<o.length;r++){var a=o[r];(void 0===t.filters[a]||"object"==typeof t.filters[a]&&0===Object.keys(t.filters[a]).length||"string"==typeof t.filters[a]&&0===t.filters[a].length||Array.isArray(t.filters[a])&&0===t.filters[a].length)&&delete this.options.filters[a]}this.options.position=t.position,this.options.index=t.index||"StreetAddress",this.options.maximumResponses=t.maximumResponses||20}l.prototype=Object.create(s.a.prototype,{}),l.prototype.constructor=l,l.prototype.patchOptionConvertor=function(e){var t=e;return t.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),t.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),t.index||(Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length>0?t.index=t.filterOptions.type[0]:t.index=t.filterOptions.type),delete t.filterOptions.type),t.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),t.searchGeometry||(t.searchGeometry=this.bbox2Json(t.filterOptions.bbox)),delete t.filterOptions.bbox),t.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),t.searchGeometry||(t.searchGeometry=this.circle2Json(t.filterOptions.circle)),delete t.filterOptions.circle),t.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),t.searchGeometry||(t.searchGeometry=this.polygon2Json(t.filterOptions.polygon)),delete t.filterOptions.polygon),!t.filters&&Object.keys(t.filterOptions).length>0&&(t.filters=t.filterOptions),delete t.filterOptions),t.position&&(t.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),t.position.lon||(t.position.lon=t.position.x),delete t.position.x),t.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),t.position.lat||(t.position.lat=t.position.y),delete t.position.y)),t.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete t.srs),t},l.prototype.buildRequest=function(e,t){var o={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=a.a.build(o),this.request?t.call(this,this.request):e.call(this,new r.a(i.a.getMessage("SERVICE_REQUEST_BUILD")))},l.prototype.analyzeResponse=function(e,t){if(this.response){var o={response:this.response,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this};c.a.build(o)}else e.call(this,new r.a(i.a.getMessage("SERVICE_RESPONSE_EMPTY")))},l.prototype.bbox2Json=function(e){return{type:"Polygon",coordinates:[[[e.left,e.top],[e.right,e.top],[e.right,e.bottom],[e.left,e.bottom],[e.left,e.top]]]}},l.prototype.circle2Json=function(e){return{type:"Circle",radius:e.radius,coordinates:[e.x,e.y]}},l.prototype.polygon2Json=function(e){for(var t={type:"Polygon",coordinates:[[]]},o=0;o<e.length;++o)t.coordinates[0].push([e[o].x,e[o].y]);return t},l.geoEPSG=["EPSG:4326"],t.a=l},function(e,t,o){"use strict";var n=o(9),i=o(3),r=o(1),s=o(2);function a(){if(!(this instanceof a))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}a.prototype={constructor:a};var c=a;function l(){if(!(this instanceof l))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}l.prototype={constructor:l};var u=l,d={build:function(e){var t=i.a.getLogger("AutoCompleteResponseFactory");t.trace(["AutoCompleteResponseFactory::build()"]);var o=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),o=e.response;else{var n=null;if(n="string"==typeof e.response?JSON.parse(e.response):e.response){if(n.error)return void e.onError.call(e.scope,new s.a({message:r.a.getMessage("SERVICE_RESPONSE_EXCEPTION",n.error.description),status:n.error.code,type:s.a.TYPE_SRVERR}));if(o=new c,!n.results||!Array.isArray(n.results))return void e.onError.call(e.scope,new s.a(r.a.getMessage("SERVICE_RESPONSE_FORMAT_3")));for(var a=null,l=0;l<n.results.length;l++){var d=n.results[l];a=new u,d&&("StreetAddress"===d.country?(a.street=d.street,a.type="StreetAddress"):"PositionOfInterest"===d.country&&(a.poi=d.street,a.kind=d.kind,a.type="PositionOfInterest"),a.position&&(a.position.x=d.x,a.position.y=d.y),a.commune=d.city,a.fullText=d.fulltext,a.postalCode=d.zipcode,a.classification=d.classification),o.suggestedLocations.push(a)}if(!o.suggestedLocations.length)return void e.onError.call(e.scope,new s.a(r.a.getMessage("SERVICE_RESPONSE_FORMAT_3")))}if(!o)return void e.onError.call(e.scope,new s.a({message:r.a.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:s.a.TYPE_UNKERR,status:-1}));if(o.exceptionReport)return void e.onError.call(e.scope,new s.a({message:r.a.getMessage("SERVICE_RESPONSE_EXCEPTION",o.exceptionReport),type:s.a.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,o)}else e.onError.call(e.scope,new s.a(r.a.getMessage("SERVICE_RESPONSE_EMPTY")))}},h=o(7);function p(e){if(!(this instanceof p))throw new TypeError(r.a.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=i.a.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var t=this.patchOptionConvertor(e);if(t.serverUrl=t.serverUrl||"https://wxs.ign.fr/calcul/geoportail/geocodage/rest/0.1/completion",n.a.apply(this,arguments),!t.text)throw new Error(r.a.getMessage("PARAM_MISSING","text"));this.options.text=t.text,t.type||(t.type=["StreetAddress,PositionOfInterest"]),this.options.type=t.type,this.options.territory=t.territory||"",this.options.maximumResponses=t.maximumResponses||10,"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}p.prototype=Object.create(n.a.prototype,{}),p.prototype.constructor=p,p.prototype.patchOptionConvertor=function(e){const t=e;return t.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),t.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),t.type||(t.type=t.filterOptions.type)),t.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),t.terr||(t.terr=t.filterOptions.territory)),delete t.filterOptions),t},p.prototype.buildRequest=function(e,t){var o="";this.options.territory&&(o=this.options.territory);var n="";this.options.type&&(n=this.options.type.join(",")),this.request=h.a.normalyzeParameters({text:encodeURIComponent(this.options.text),type:n,terr:o,maximumResponses:this.options.maximumResponses}),this.request?t.call(this,this.request):e.call(this,new s.a(r.a.getMessage("SERVICE_REQUEST_BUILD")))},p.prototype.analyzeResponse=function(e,t){if(this.response){var o={response:this.response,rawResponse:this.options.rawResponse,onSuccess:t,onError:e,scope:this};d.build(o)}else e.call(this,new s.a(r.a.getMessage("SERVICE_RESPONSE_EMPTY")))};t.a=p},,,,,,,function(e,t,o){},function(e,t,o){},,,function(e,t,o){},,,,,,,function(e,t,o){},,,,,,,,,,,function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),r=(o(16),o(39),o(17),o(46),o(5)),s=o(3),a=o(1),c=o(2),l=o(9),u=o(12);function d(e){if(!(this instanceof d))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=s.a.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=e||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,"distance"===this.options.method?(this.costType="distance",this.costValue=this.options.distance):(this.costType="time",this.costValue=this.options.time)}d.CLASSNAME="ProcessIsoCurveParam",d.prototype={constructor:d,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return"m"===this.distanceUnit?"meter":"km"===this.distanceUnit?"kilometer":""},getConstraints:function(){var e=[];if(0!==this.constraints.length)for(var t=0;t<this.constraints.length;t++)e.push(JSON.stringify(this.constraints[t]));return e.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}},d.prototype.getParams=function(){var e=[];return e.push({k:"resource",v:this.resource}),e.push({k:"point",v:this.getLocation()}),e.push({k:"direction",v:this.getDirection()}),e.push({k:"costType",v:this.costType}),e.push({k:"costValue",v:this.costValue}),e.push({k:"profile",v:this.profile}),e.push({k:"timeUnit",v:this.timeUnit}),e.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&e.push({k:"crs",v:this.crs}),this.constraints&&e.push({k:"constraints",v:this.getConstraints()}),e};var h=d;function p(e){if(this.logger=s.a.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof p))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!e)throw new Error(a.a.getMessage("PARAM_EMPTY","options"));this.settings=e,this.mode=this.settings.httpMethod||"GET"}p.prototype={requestString:null,constructor:p,processRequestString:function(){var e="",t=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var o=new h(this.settings).getParams();for(t=0;t<o.length;t++){var n=o[t];e&&(e+="&"),e+=n.k+"="+n.v}break;case"POST":this.logger.trace("Process POST Request");var i={};i.resource=this.settings.resource,i.point=this.settings.position.x+","+this.settings.position.y,"distance"===this.settings.method?(i.costType="distance",i.costValue=this.settings.distance):(i.costType="time",i.costValue=this.settings.time),i.profile=this.settings.graph,this.settings.reverse?i.direction="arrival":i.direction="departure",i.constraints=this.settings.constraints,i.distanceUnit=this.settings.distanceUnit,i.timeUnit=this.settings.timeUnit,i.crs=this.settings.srs,e=JSON.stringify(i);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(e),this.requestString=e,this.requestString}};var m=p;function g(){if(!(this instanceof g))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}g.prototype={constructor:g};var f=g,v={build:function(e){var t=s.a.getLogger("ProcessIsoCurveResponseFactory");t.trace(["ProcessIsoCurveResponseFactory::build()"]);var o=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),o=e.response;else{var n;if(t.trace("analyze response : json"),n="string"==typeof e.response?JSON.parse(e.response):e.response,o=new f,!n)return void e.onError.call(e.scope,new c.a(a.a.getMessage("SERVICE_RESPONSE_ANALYSE",e.response)));"distance"===n.costType?(o.time="",o.distance=n.costValue):(o.time=n.costValue,o.distance=""),o.message="",o.id="",o.srs=n.crs,o.geometry=n.geometry;var i=n.point.split(",");if(o.location&&(o.location.x=i[0],o.location.y=i[1]),o.exceptionReport)return void e.onError.call(e.scope,new c.a({message:a.a.getMessage("SERVICE_RESPONSE_EXCEPTION",o.exceptionReport),type:c.a.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,o)}else e.onError.call(e.scope,new c.a(a.a.getMessage("SERVICE_RESPONSE_EMPTY")))}};function y(e){if(!(this instanceof y))throw new TypeError(a.a.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",l.a.apply(this,arguments),this.logger=s.a.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!e.position)throw new Error(a.a.getMessage("PARAM_MISSING","position"));if(null===e.position.x)throw new Error(a.a.getMessage("PARAM_MISSING","position.x"));if(null===e.position.y)throw new Error(a.a.getMessage("PARAM_MISSING","position.y"));if(!e.time&&!e.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!e.time&&e.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),e.time&&!e.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=e.resource||"bdtopo-iso",this.options.exclusions=e.exclusions||[],this.options.reverse=e.reverse||!1,this.options.srs=e.srs||"EPSG:4326",this.options.distanceUnit=e.distanceUnit||"m",this.options.timeUnit=e.timeUnit||"second",e.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,e.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,e.graph?("Voiture"===e.graph&&(this.options.graph="car"),"Pieton"===e.graph&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],e.constraints){if(!Array.isArray(e.constraints))throw new Error(a.a.getMessage("PARAM_TYPE","constraints"));for(var t=0;t<e.constraints.length;t++)this.options.constraints.push(e.constraints[t])}var o={},n={},i={};if(e.exclusions&&0!==e.exclusions.length){this.logger.warn("options.exclusions is DEPRECATED !!");for(var r=0;r<e.exclusions.length;r++)"string"==typeof e.exclusions[r]&&(e.exclusions[r]=e.exclusions[r].toLowerCase(),"toll"===e.exclusions[r]&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="autoroute",this.options.constraints.push(i)),"tunnel"===e.exclusions[r]&&(o.constraintType="banned",o.key="wayType",o.operator="=",o.value="tunnel",this.options.constraints.push(o)),"bridge"===e.exclusions[r]&&(n.constraintType="banned",n.key="wayType",n.operator="=",n.value="pont",this.options.constraints.push(n)))}if(this.options.outputFormat="string"==typeof e.outputFormat?e.outputFormat.toLowerCase():"json",e.outputFormat&&"json"!==e.outputFormat)throw new Error(a.a.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var c=u.a.ProcessIsoCurve.url(this.options.apiKey);if(!c)throw new Error("Url by default not found !");this.options.serverUrl=c,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}y.prototype=Object.create(l.a.prototype,{}),y.prototype.constructor=y,y.prototype.buildRequest=function(e,t){try{var o=new m(this.options);if(!o.processRequestString())throw new Error(a.a.getMessage("SERVICE_REQUEST_BUILD"));this.request=o.requestString}catch(t){return void e.call(this,new c.a(t.message))}t.call(this,this.request)},y.prototype.analyzeResponse=function(e,t){if(this.response){var o={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:t,onError:e,scope:this};v.build(o)}else e.call(this,new c.a(a.a.getMessage("SERVICE_RESPONSE_EMPTY")))};var E=y,_=o(10),C=o(4),P=o(24),A={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPisochron"),e.className="GPwidget",e},_createShowIsoElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowIsochron"),e.type="checkbox",e},_createShowIsoPictoElement:function(){var e=this,t=document.createElement("label");t.id=this._addUID("GPshowIsochronPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowIsochron"),t.title="Calculer une isochrone",t.addEventListener?t.addEventListener("click",(function(t){e.onShowIsoPanelClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){e.onShowIsoPanelClick(t)}));var o=document.createElement("span");return o.id=this._addUID("GPshowIsochronOpen"),o.className="GPshowAdvancedToolOpen",t.appendChild(o),t},_createIsoPanelElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPisochronPanel"),e.className="GPpanel",e},_createIsoPanelHeaderElement:function(){var e=this,t=document.createElement("div");t.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Calcul d'isochrone",t.appendChild(o);var n=document.createElement("div");return n.id=this._addUID("GPisochronPanelClose"),n.className="GPpanelClose",n.title="Fermer le panneau",n.addEventListener?n.addEventListener("click",(function(){document.getElementById(e._addUID("GPshowIsochronPicto")).click()}),!1):n.attachEvent&&n.attachEvent("onclick",(function(){document.getElementById(e._addUID("GPshowIsochronPicto")).click()})),t.appendChild(n),t},_createIsoPanelFormElement:function(){var e=this,t=document.createElement("form");return t.id=this._addUID("GPisochronForm"),t.addEventListener("submit",(function(t){return t.preventDefault(),e.onIsoComputationSubmit(t),!1})),t},_createIsoWaitingElement:function(){var e=document.createElement("div");e.id=this._addUID("GPisochronCalcWaitingContainer"),e.className="GPisochronCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPisochronCalcWaiting",t.innerHTML="Calcul en cours...",e.appendChild(t),e},_createIsoPanelFormTypeChoiceElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPisochronChoice"),e},_createIsoPanelFormTypeChoiceChronElement:function(e){var t=this,o=document.createElement("div");o.className="GPisochronChoiceAlt";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltChron"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!e,n.addEventListener?n.addEventListener("change",(function(e){document.getElementById(t._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueDist")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange(e)}),!1):n.attachEvent&&n.attachEvent("onchange",(function(){document.getElementById(t._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueDist")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange()})),n.value="isochron",o.appendChild(n);var i=document.createElement("label");i.className="GPisochronChoiceAltImg",i.htmlFor=this._addUID("GPisochronChoiceAltChron"),o.appendChild(i);var r=document.createElement("span");return r.id=this._addUID("GPisochronChoiceAltChronTxt"),r.innerHTML="isochrone",r.addEventListener?r.addEventListener("click",(function(){document.getElementById(t._addUID("GPisochronChoiceAltChron")).click()}),!1):r.attachEvent&&r.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPisochronChoiceAltChron")).click()})),o.appendChild(r),o},_createIsoPanelFormTypeChoiceDistElement:function(e){var t=this,o=document.createElement("div");o.className="GPisochronChoiceAlt";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltDist"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!e,n.addEventListener?n.addEventListener("change",(function(e){document.getElementById(t._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueChron")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange(e)}),!1):n.attachEvent&&n.attachEvent("onchange",(function(){document.getElementById(t._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueChron")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange()})),n.value="isodistance",o.appendChild(n);var i=document.createElement("label");i.className="GPisochronChoiceAltImg",i.htmlFor=this._addUID("GPisochronChoiceAltDist"),o.appendChild(i);var r=document.createElement("span");return r.id=this._addUID("GPisochronChoiceAltDistTxt"),r.innerHTML="isodistance",r.addEventListener?r.addEventListener("click",(function(){document.getElementById(t._addUID("GPisochronChoiceAltDist")).click()}),!1):r.attachEvent&&r.attachEvent("onclick",(function(){document.getElementById(t._addUID("GPisochronChoiceAltDist")).click()})),o.appendChild(r),o},_createIsoPanelFormValueIsochronElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPisochronValueChron"),o.className=e?"GPflexInput":"GPisochronValueHidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueChronLabel"),n.htmlFor=this._addUID("GPisochronValueChronInput"),n.innerHTML="Temps",o.appendChild(n);var i=document.createElement("input");i.id=this._addUID("GPisochronValueChronInput1"),i.min="0",i.step="1",i.value="0",i.type="number",i.addEventListener?i.addEventListener("change",(function(e){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeHourChange(e)})):i.attachEvent&&i.attachEvent("onchange",(function(e){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeHourChange(e)})),o.appendChild(i);var r=document.createElement("label");r.innerHTML="h",o.appendChild(r);var s=document.createElement("input");s.id=this._addUID("GPisochronValueChronInput2"),s.min="0",s.max="59",s.step="1",s.value="0",s.type="number",s.addEventListener?s.addEventListener("change",(function(e){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeMinuteChange(e)})):s.attachEvent&&s.attachEvent("onchange",(function(e){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeMinuteChange(e)})),o.appendChild(s);var a=document.createElement("label");return a.innerHTML="min",o.appendChild(a),o},_createIsoPanelFormValueIsodistanceElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPisochronValueDist"),o.className=e?"GPflexInput":"GPisochronValueHidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueDistLabel"),n.htmlFor=this._addUID("GPisochronValueDistInput"),n.innerHTML="Distance",o.appendChild(n);var i=document.createElement("input");i.id=this._addUID("GPisochronValueDistInput"),i.min="0",i.step="any",i.value="0",i.type="number",i.addEventListener?i.addEventListener("change",(function(e){"function"==typeof t.onIsoValueDistChange&&t.onIsoValueDistChange(e)})):i.attachEvent&&i.attachEvent("onchange",(function(e){"function"==typeof t.onIsoValueDistChange&&t.onIsoValueDistChange(e)})),o.appendChild(i);var r=document.createElement("label");return r.innerHTML="km",o.appendChild(r),o},_createIsoPanelFormModeChoiceElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPisochronModeChoice"),e},_createIsoPanelFormModeChoiceTransportElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPisochronTransportChoice");var n=document.createElement("span");n.className="GPisochronModeLabel",n.innerHTML="Mode de transport",o.appendChild(n);for(var i=0;i<e.length;i++){var r=e[i];if("Voiture"===r){var s=document.createElement("input");s.id=this._addUID("GPisochronTransportCar"),s.type="radio",s.name="GPisochronTransport",0===i&&(s.checked=!0),s.addEventListener?s.addEventListener("change",(function(e){t.onIsoModeTransportChange(e)})):s.attachEvent&&s.attachEvent("onchange",(function(e){t.onIsoModeTransportChange(e)})),s.value="Voiture",o.appendChild(s);var a=document.createElement("label");a.className="GPisochronTransportImg",a.htmlFor=this._addUID("GPisochronTransportCar"),a.title="Voiture",o.appendChild(a)}if("Pieton"===r){var c=document.createElement("input");c.id=this._addUID("GPisochronTransportPedestrian"),c.type="radio",c.name="GPisochronTransport",0===i&&(c.checked=!0),c.addEventListener?c.addEventListener("change",(function(e){t.onIsoModeTransportChange(e)})):c.attachEvent&&c.attachEvent("onchange",(function(e){t.onIsoModeTransportChange(e)})),c.value="Pieton",o.appendChild(c);var l=document.createElement("label");l.className="GPisochronTransportImg",l.htmlFor=this._addUID("GPisochronTransportPedestrian"),l.title="Piéton",o.appendChild(l)}}return o},_createIsoPanelFormModeChoiceDirectionElement:function(e){var t=this,o=document.createElement("div");o.id=this._addUID("GPisochronDirectionChoice");var n=document.createElement("span");n.className="GPisochronModeLabel",n.innerHTML="Sens de parcours",o.appendChild(n);var i=document.createElement("select");i.id=this._addUID("GPisochronDirectionSelect"),i.className="GPinputSelect",i.addEventListener("change",(function(e){t.onIsoModeDirectionChange(e)}));for(var r=0;r<e.length;r++){var s=e[r];if("departure"===s.toLowerCase()){var a=document.createElement("option");0===r&&(a.selected="selected"),a.value="departure",a.text="Départ",i.appendChild(a)}if("arrival"===s.toLowerCase()){var c=document.createElement("option");0===r&&(c.selected="selected"),c.value="arrival",c.text="Arrivée",i.appendChild(c)}}return o.appendChild(i),o},_createShowIsoExclusionsElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowIsoExclusions"),e.type="checkbox",e},_createShowIsoExclusionsPictoElement:function(){var e=document.createElement("label");return e.id=this._addUID("GPshowIsoExclusionsPicto"),e.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto",e.htmlFor=this._addUID("GPshowIsoExclusions"),e.title="Exclusions",e.style.top="240px",e},_createIsoPanelFormExclusionsElement:function(){var e=document.createElement("div");e.id=this._addUID("GPisoExclusions");var t=document.createElement("span");return t.className="GPisoExclusionsLabel",t.innerHTML="Passages autorisés",e.appendChild(t),e},_createIsoPanelFormExclusionOptionsElement:function(e){var t=this,o=document.createElement("div");for(var n in o.className="GPisoExclusionsOptions",e)if(e.hasOwnProperty(n)){var i=e[n];switch(n){case"toll":var r=document.createElement("input");r.id=this._addUID("GPisoExclusionsToll"),r.type="checkbox",r.checked=!i,r.addEventListener?r.addEventListener("change",(function(e){t.onIsoExclusionsChange(e)})):r.attachEvent&&r.attachEvent("onchange",(function(e){t.onIsoExclusionsChange(e)})),r.value="Toll",o.appendChild(r);var s=document.createElement("label");s.className="GPisoExclusionsOption",s.htmlFor=this._addUID("GPisoExclusionsToll"),s.innerHTML="Péages",o.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GPisoExclusionsTunnel"),a.type="checkbox",a.checked=!i,a.addEventListener?a.addEventListener("change",(function(e){t.onIsoExclusionsChange(e)})):a.attachEvent&&a.attachEvent("onchange",(function(e){t.onIsoExclusionsChange(e)})),a.value="Tunnel",o.appendChild(a);var c=document.createElement("label");c.className="GPisoExclusionsOption",c.htmlFor=this._addUID("GPisoExclusionsTunnel"),c.innerHTML="Tunnels",o.appendChild(c);break;case"bridge":var l=document.createElement("input");l.id=this._addUID("GPisoExclusionsBridge"),l.type="checkbox",l.checked=!i,l.addEventListener?l.addEventListener("change",(function(e){t.onIsoExclusionsChange(e)})):l.attachEvent&&l.attachEvent("onchange",(function(e){t.onIsoExclusionsChange(e)})),l.value="Bridge",o.appendChild(l);var u=document.createElement("label");u.className="GPisoExclusionsOption",u.htmlFor=this._addUID("GPisoExclusionsBridge"),u.innerHTML="Ponts",o.appendChild(u)}}return o},_createIsoSubmitFormElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPisochronSubmit"),e.className="GPinputSubmit",e.type="submit",e.value="Calculer",e},_createIsoFormResetElement:function(){var e=this,t=document.createElement("div");return t.id=this._addUID("GPisochronReset"),t.title="Réinitialiser les paramètres",t.addEventListener("click",(function(t){e.onIsoResetClick(t)})),t}};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=r.a.getLogger("Isocurve"),R=i.a.Control.extend({includes:A,options:{position:"topleft",collapsed:!0,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],disableReverse:!1,isocurveOptions:{},autocompleteOptions:{}},initialize:function(e){i.a.Util.setOptions(this,e),this._uid=C.a.generate(),this._isDesktop=this._detectSupport(),this._waitingContainer=null,this._showContainer=null,this._pictoContainer=null,this._formContainer=null,this._submitContainer=null,this._currentTransport=null,this._currentDirection=null,this._currentComputation=null,this._currentTimeHour=0,this._currentTimeMinute=0,this._currentDistance=0,this._currentExclusions=[],this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions(),this._currentPoint=null,this._geojsonIso=null,this._waiting=!1,this._timer=null,this._currentIsoResults=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},onAdd:function(e){var t=this._container=this._initLayout(e);return i.a.DomEvent.disableClickPropagation(t).disableScrollPropagation(t),t},onRemove:function(){},_initTransport:function(){this._currentTransport="Voiture";var e=this.options.graphs;e&&0!==e.length||(this.options.graphs=["Voiture","Pieton"]),i.a.Util.isArray(e)&&e.length&&("Voiture"!==e[0]&&"Pieton"!==e[0]||(this._currentTransport=e[0]));var t=this.options.isocurveOptions;t.graph&&(this._currentTransport=t.graph)},_initDirection:function(){this._currentDirection="departure";var e=this.options.directions;e&&0!==e.length||(this.options.directions=["departure","arrival"]),i.a.Util.isArray(e)&&e.length&&("departure"!==e[0]&&"arrival"!==e[0]||(this._currentDirection=e[0]));var t=this.options.isocurveOptions;t.reverse||(this._currentDirection="departure"),!0===t.reverse&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])},_initComputation:function(){this._currentComputation="time";var e=this.options.methods;e&&0!==e.length||(this.options.methods=["time","distance"]),i.a.Util.isArray(e)&&e.length&&("time"!==e[0]&&"distance"!==e[0]||(this._currentComputation=e[0]));var t=this.options.isocurveOptions;t.method&&(this._currentComputation=t.method),t.time&&(this._currentComputation="time"),t.distance&&(this._currentComputation="distance")},_initExclusions:function(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||"object"===I(e)&&0===Object.keys(e).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&"object"===I(e)&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e.k&&this._currentExclusions.push(t);var o=this.options.isocurveOptions;Array.isArray(o.exclusions)&&(this._currentExclusions=o.exclusions)},_checkRightsManagement:function(){var e=null,t=[],o=null;o=this.options.isocurveOptions.apiKey,(t=(e=this.options.isocurveOptions.filterOptions)?e.type:[])&&0!==t.length||(t=["Voiture","Pieton"]);var n=_.a.check({key:o||this.options.apiKey,resources:t,services:["Isochrone"]});w.log("rightManagementIsochrone",n),o=this.options.autocompleteOptions.apiKey,(t=(e=this.options.autocompleteOptions.filterOptions)?e.type:[])&&0!==t.length||(t=["PositionOfInterest","StreetAddress"]);var i=_.a.check({key:o||this.options.apiKey,resources:t,services:["AutoCompletion"]});w.log("rightManagementAutoComplete",i),n||i||(this._noRightManagement=!0),i&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=i.AutoCompletion,this._resources.AutoCompletion.key=i.key),n&&(this._resources.Isochrone={},this._resources.Isochrone.resources=n.Isochrone,this._resources.Isochrone.key=n.key)},_detectSupport:function(){var e=!0,t=window.navigator.userAgent.toLowerCase();return-1===t.indexOf("iphone")&&-1===t.indexOf("ipod")&&-1===t.indexOf("ipad")&&-1===t.indexOf("android")&&-1===t.indexOf("mobile")&&-1===t.indexOf("blackberry")&&-1===t.indexOf("tablet")&&-1===t.indexOf("phone")&&-1===t.indexOf("touch")||(e=!1),-1===t.indexOf("msie")&&-1===t.indexOf("trident")||(e=!0),e},_initLayout:function(e){var t=this._createMainContainerElement(),o=this._showContainer=this._createShowIsoElement();t.appendChild(o),this.options.collapsed||(o.checked=!0);var n=this._pictoContainer=this._createShowIsoPictoElement();t.appendChild(n);var i=this._createIsoPanelElement(),r=this._createIsoPanelHeaderElement();i.appendChild(r);var s=this._formContainer=this._createIsoPanelFormElement(),a=this._createIsoPanelFormPointElement(e);s.appendChild(a);for(var c=!1,l=!1,u=this._createIsoPanelFormTypeChoiceElement(),d=0;d<this.options.methods.length;d++)"time"===this.options.methods[d]&&(c=0===d,u.appendChild(this._createIsoPanelFormTypeChoiceChronElement(c))),"distance"===this.options.methods[d]&&(l=0===d,u.appendChild(this._createIsoPanelFormTypeChoiceDistElement(l)));s.appendChild(u),s.appendChild(this._createIsoPanelFormValueIsochronElement(c)),s.appendChild(this._createIsoPanelFormValueIsodistanceElement(l));var h=this._createIsoPanelFormModeChoiceElement();if(h.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),h.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),s.appendChild(h),this.options.exclusions&&"object"===I(this.options.exclusions)&&0!==Object.keys(this.options.exclusions).length){s.appendChild(this._createShowIsoExclusionsElement()),s.appendChild(this._createShowIsoExclusionsPictoElement());var p=this._createIsoPanelFormExclusionsElement();p.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),s.appendChild(p)}var m=this._createIsoFormResetElement();s.appendChild(m);var g=this._submitContainer=this._createIsoSubmitFormElement();s.appendChild(g),i.appendChild(s);var f=this._waitingContainer=this._createIsoWaitingElement();return i.appendChild(f),t.appendChild(i),t},_createIsoPanelFormPointElement:function(e){return this._currentPoint=new P.a({apiKey:this.options.apiKey||null,tag:{id:0,unique:this._uid,label:"Départ",color:"red",display:!0},displayInfo:!0,disableReverse:this.options.disableReverse,autocompleteOptions:this.options.autocompleteOptions||null}),this._currentPoint.setMap(e),this._currentPoint.getContainer()},onShowIsoPanelClick:function(e){w.log("onShowIsoPanelClick",e)},onIsoResetClick:function(e){w.log("onIsoResetClick",e),this._clear()},onIsoTypeChoiceChange:function(e){var t=e.target.value;t&&("isodistance"===t&&(this._currentComputation="distance"),"isochron"===t&&(this._currentComputation="time"))},onIsoModeTransportChange:function(e){var t=e.target.value;t&&(this._currentTransport=t)},onIsoModeDirectionChange:function(e){var t=e.target.value;t&&(this._currentDirection=t)},onIsoValueChronTimeHourChange:function(e){var t=e.target.value;this._timeHourContainer=e.target,t&&(this._currentTimeHour=t)},onIsoValueChronTimeMinuteChange:function(e){var t=e.target.value;this._timeMinuteContainer=e.target,t&&(this._currentTimeMinute=t)},onIsoValueDistChange:function(e){var t=e.target.value;this._distanceContainer=e.target,t&&(this._currentDistance=t)},onIsoExclusionsChange:function(e){var t=e.target.value,o=e.target.checked;if(t){for(var n=!1,i=null,r=0;r<this._currentExclusions.length;r++)S(this._currentExclusions[r],t.toLowerCase())&&(i=r,n=!0);n||o||this._currentExclusions.push(t.toLowerCase()),n&&o&&this._currentExclusions.splice(i,1)}},onIsoComputationSubmit:function(){var e,t;if(this._currentPoint&&this._currentPoint.getCoordinate&&this._currentPoint.getCoordinate())if("time"===this._currentComputation.toLowerCase()&&(e=3600*this._currentTimeHour+60*this._currentTimeMinute,w.log("time : ",e)),"distance"===this._currentComputation.toLowerCase()&&(t=1e3*this._currentDistance,w.log("distance : ",t)),e||t){if(!this._noRightManagement){this._displayWaitingContainer();var o=this,n=o._currentPoint.getCoordinate(),i={x:n.lon||n.lng,y:n.lat};this._requestIsoCurve({position:i,graph:o._currentTransport,exclusions:o._currentExclusions,method:o._currentComputation,reverse:"arrival"===o._currentDirection.toLowerCase(),time:e,distance:t,smoothing:!0,timeout:7e3,protocol:"XHR",onSuccess:function(e){w.log(e),e&&o._drawIsoResults(e)},onFailure:function(e){o._hideWaitingContainer(),o._clearIsoResultsGeometry(),w.log(e.message)}})}}else w.log("Missing time or distance parameter")},_requestIsoCurve:function(e){if(e&&("object"!==I(e)||0!==Object.keys(e).length)&&e.position&&!this._noRightManagement){var t=this._resources.Isochrone;if(t){var o=t.resources;if(o&&("object"!==I(o)||0!==Object.keys(o).length)){var n={};i.a.Util.extend(n,e),i.a.Util.extend(n,this.options.isocurveOptions);for(var r=!1,s=0;s<o.length;s++)o[s]===n.graph&&(r=!0);if(r){var a=this._resources.Isochrone.key;n.apiKey=this.options.isocurveOptions.apiKey||this.options.apiKey||a,n.ssl=this.options.ssl,w.log(n),new E(n).call()}else w.log("no rights for this service !?")}}}},_drawIsoResults:function(e){if(this._clearIsoResultsGeometry(),this._currentIsoResults=e,e.geometry){var t=this._map,o=e.geometry;this._geojsonIso=i.a.geoJson(o,{style:{color:"#ff7800",weight:5,opacity:.65}}).addTo(t),this._hideWaitingContainer(),this._formContainer.className="GPisochroComponentHidden"}else this._hideWaitingContainer()},_clear:function(){this._initTransport(),this._initExclusions(),this._initComputation(),this._initDirection(),this._currentIsoResults=null,this._clearIsoResultsGeometry(),this._currentPoint.clear(),this._timeHourContainer&&(this._timeHourContainer.value=0),this._timeMinuteContainer&&(this._timeMinuteContainer.value=0),this._distanceContainer&&(this._distanceContainer.value=0)},_clearIsoResultsGeometry:function(){var e=this._map;null!=this._geojsonIso&&(e.removeLayer(this._geojsonIso),this._geojsonIso=null)},_displayWaitingContainer:function(){this._waitingContainer.className="GPisochronCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout((function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)}),16e3)},_hideWaitingContainer:function(){this._waiting&&(this._waitingContainer.className="GPisochronCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},compute:function(e,t,o){this._showContainer.checked||this._pictoContainer.click();var n=this._map;if(n){var r={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};if(i.a.Util.extend(r,o),this._currentPoint.setCoordinate(e),i.a.DomUtil.get("GPlocationOrigin_0-"+this._uid).value=e.lng+" , "+e.lat,this._currentTransport=r.transport,"Voiture"===r.transport?i.a.DomUtil.get("GPisochronTransportCar-"+this._uid).checked=!0:i.a.DomUtil.get("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=r.exclusions,this._currentComputation=r.method,"time"===r.method){var s=t.split(".");this._currentTimeHour=s[0]||0,i.a.DomUtil.get("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=s[1]||0,i.a.DomUtil.get("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,i.a.DomUtil.get("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=t,i.a.DomUtil.get("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,i.a.DomUtil.get("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=r.direction,i.a.DomUtil.get("GPisochronDirectionSelect-"+this._uid).selectedIndex="departure"===r.direction?0:1,this.onIsoComputationSubmit(),n.flyTo(e)}}});t.default=R;window.L&&(window.L.geoportalControl||(window.L.geoportalControl={}),window.L.geoportalControl.Isocurve=R);var S=function e(t,o){if(t===o)return!0;if("object"===I(t)&&null!=t&&"object"===I(o)&&null!=o){if(Object.keys(t).length!==Object.keys(o).length)return!1;for(var n in t){if(!o.hasOwnProperty(n))return!1;if(!e(t[n],o[n]))return!1}return!0}return!1}}]).default;