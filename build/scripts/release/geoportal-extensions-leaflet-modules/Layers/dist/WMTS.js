/*!
 * @brief French Geoportal Extension for Leaflet
 *
 * This software is released under the licence CeCILL-B (Free BSD compatible)
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-fr.txt
 * @see http://www.cecill.info/
 *
 * @copyright copyright (c) IGN 
 * @license CeCILL-B
 * @author IGN
 * @version 2.2.7
 * @date 18/11/2022
 *
 */
WMTS=function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=55)}({0:function(e,t){e.exports=L},23:function(e){e.exports=JSON.parse('{"name":"geoportal-extensions","description":"French Geoportal Extensions for OpenLayers, Leaflet and iTowns libraries","version":"2.7.2","date":"18/11/2022","leafletExtName":"French Geoportal Extension for Leaflet","leafletExtVersion":"2.2.7","olExtName":"French Geoportal Extension for OpenLayers","olExtVersion":"3.2.18","itownsExtName":"French Geoportal Extension for Itowns","itownsExtVersion":"2.3.9","main":"dist/leaflet/GpPluginLeaflet.js, dist/openlayers/GpPluginOpenLayers.js, dist/itowns/GpPluginItowns.js","types":"dist/leaflet/index.d.ts, dist/openlayers/index.d.ts, dist/itowns/index.d.ts","module":"src/Leaflet/index.js, src/OpenLayers/index.js, src/Itowns/index.js","directories":{},"scripts":{"setup":"npm install","clean":"echo \\"Warning: target not yet implemented!\\" && exit 0","eslint":"eslint src/","test":"npm run test:serve","test:serve":"cd test && webpack-dev-server --hot --config webpack.test.serve.js","sample":"npm run sample:serve","sample:serve":"npm run sample:ol:serve","sample:itowns:serve":"webpack-dev-server --config build/webpack/webpack.config.itowns --mode=development --https --open-page samples/index-itowns-map.html --content-base . --output-public-path \'/dist/itowns/\' --port 9001 --open","sample:leaflet:serve":"webpack-dev-server --config build/webpack/webpack.config.leaflet --mode=development --https --open-page samples/index-leaflet-map.html --content-base . --output-public-path \'/dist/leaflet/\' --port 9001 --open","sample:ol:serve":"webpack-dev-server --config build/webpack/webpack.config.openlayers --mode=development --https --open-page samples/index-openlayers-map.html --content-base . --output-public-path \'/dist/openlayers/\' --port 9001 --open","generate-types:ol":"npx tsc -p build/types/tsconfig-openlayers.json","generate-types:leaflet":"npx tsc -p build/types/tsconfig-leaflet.json","generate-types:itowns":"npx tsc -p build/types/tsconfig-itowns.json","generate-jsdoc:ol":"jsdoc -c build/jsdoc/jsdoc-openlayers.json","generate-jsdoc:leaflet":"jsdoc -c build/jsdoc/jsdoc-leaflet.json","generate-jsdoc:itowns":"jsdoc -c build/jsdoc/jsdoc-itowns.json","doc":"npm run doc:serve","doc:serve":"npm run doc:ol:serve","doc:itowns:serve":"webpack-dev-server --hot  --config build/webpack/webpack.config.itowns --content-base jsdoc/itowns --port 9001 --open","doc:leaflet:serve":"webpack-dev-server --hot  --config build/webpack/webpack.config.leaflet --content-base jsdoc/leaflet --port 9001 --open","doc:ol:serve":"webpack-dev-server --hot  --config build/webpack/webpack.config.openlayers --content-base jsdoc/openlayers --port 9001 --open","build:dev":"npm-run-all --print-label --print-name build:*:dev","build:prod":"npm-run-all --print-label --print-name build:*:prod","build:src":"npm-run-all --print-label --print-name build:*:src","build":"npm-run-all --print-label --print-name build:*:*","build:itowns":"npm-run-all --print-label --print-name build:itowns:*","build:itowns:dev":"webpack --config build/webpack/webpack.config.itowns --mode=development","build:itowns:prod":"webpack --config build/webpack/webpack.config.itowns --mode=production","build:itowns:src":"webpack --config build/webpack/webpack.config.itowns --mode=none","build:ol":"npm-run-all --print-label --print-name build:ol:*","build:ol:dev":"webpack --config build/webpack/webpack.config.openlayers --mode=development","build:ol:prod":"webpack --config build/webpack/webpack.config.openlayers --mode=production","build:ol:src":"webpack --config build/webpack/webpack.config.openlayers --mode=none","build:ol-modules":"npm-run-all --print-label --print-name build:ol-modules:*","build:ol-modules:dev":"webpack --config build/webpack/webpack.config.openlayers.modules --mode=development","build:ol-modules:prod":"webpack --config build/webpack/webpack.config.openlayers.modules --mode=production","build:ol-modules:src":"webpack --config build/webpack/webpack.config.openlayers.modules --mode=none","build:leaflet":"npm-run-all --print-label --print-name build:leaflet:*","build:leaflet:dev":"webpack --config build/webpack/webpack.config.leaflet --mode=development","build:leaflet:prod":"webpack --config build/webpack/webpack.config.leaflet --mode=production","build:leaflet:src":"webpack --config build/webpack/webpack.config.leaflet --mode=none","build:leaflet-modules":"npm-run-all --print-label --print-name build:leaflet-modules:*","build:leaflet-modules:dev":"webpack --config build/webpack/webpack.config.leaflet.modules --mode=development","build:leaflet-modules:prod":"webpack --config build/webpack/webpack.config.leaflet.modules --mode=production","build:leaflet-modules:src":"webpack --config build/webpack/webpack.config.leaflet.modules --mode=none"},"repository":{"type":"git","url":"https://github.com/IGNF/geoportal-extensions.git"},"author":"IGNF","keywords":["geoportail","javascript","OpenLayers","Leaflet","Itowns","3D"],"license":"CECILL-B","bugs":{"url":"https://github.com/IGNF/geoportal-extensions/issues"},"homepage":"https://github.com/IGNF/geoportal-extensions#readme","dependencies":{"@mapbox/mapbox-gl-style-spec":"13.20.1","eventbusjs":"0.2.0","geoportal-access-lib":"3.2.0","itowns":"2.38.2","leaflet":"1.7.1","leaflet-draw":"1.0.4","loglevel":"^1.6.7","markdown-toc":"^1.2.0","ol":"6.9.0","ol-mapbox-style":"6.7.0","proj4":"2.7.5","proj4leaflet":"1.0.2","sortablejs":"1.14.0","three":"0.137.5","typescript":"^4.5.5","whatwg-fetch":"3.0.0"},"devDependencies":{"@babel/core":"^7.4.4","@babel/plugin-transform-template-literals":"^7.7.4","@babel/preset-env":"^7.4.4","babel-loader":"^8.0.5","chai":"^4.2.0","chalk":"^4.0.0","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.0.3","core-js":"^3.6.4","css-loader":"^3.4.2","eslint":"^6.8.0","eslint-config-standard":"^14.1.1","eslint-loader":"^4.0.0","eslint-plugin-import":"^2.17.2","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.1.1","eslint-plugin-standard":"^4.0.0","exports-loader":"^0.7.0","expose-loader":"^0.7.5","fs-extra":"^9.0.0","handlebars":"^4.7.5","handlebars-layouts":"^3.1.4","html-webpack-plugin":"^4.0.4","jsdoc-webpack-plugin":"^0.3.0","mini-css-extract-plugin":"^0.9.0","mocha":"^7.1.1","mocha-loader":"^5.0.0","npm-run-all":"^4.1.5","optimize-css-assets-webpack-plugin":"^5.0.1","path":"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0","requirejs":"^2.3.6","responsive-loader":"^1.2.0","speed-measure-webpack-plugin":"^1.3.0","string-template":"^1.0.0","style-loader":"^1.1.3","terser-webpack-plugin":"^2.0.0","url-loader":"^4.0.0","webpack":"^4.30.0","webpack-cli":"^3.3.1","webpack-dev-server":"^3.3.1","webpack-node-externals":"^1.7.2"}}')},30:function(e,t,o){"use strict";var n={getZoomLevelFromScaleDenominator:function(e,t){var o={};switch(t){case"EPSG:2154":o={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:o={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424}}var n=28e-5*e;for(var i in o)if(o.hasOwnProperty(i)&&o[i]<=n)return i=parseInt(i,10);return 0},getAttributions:function(e){var t=e.zoom,o=[];if(null!=e.originators&&e.visibility)for(var n,i=0,l=e.originators.length;i<l;i++){n=!0;for(var r=e.originators[i],a=e.originators[i].constraints||[],s=0,c=a.length;s<c;s++){var p=a[s];n=!0;var d=this.getZoomLevelFromScaleDenominator(p.maxScaleDenominator,e.crs),u=this.getZoomLevelFromScaleDenominator(p.minScaleDenominator,e.crs)||21;d&&d>t&&(n=!1),n&&u&&u<t&&(n=!1);var b=p.bbox;if(n&&b){n=!1;var f=e.extent;if(f){var m=[b.top,b.left,b.bottom,b.right];if(this.intersects(f,m)){n=!0;break}}}}if(n){var g=r.logo,v=r.url,w=r.name?r.name:"",h=r.attribution,y=document.createElement("div");y.className="gp-control-attribution";var k=null;(k=document.createElement("a")).className="gp-control-attribution-link",k.target="_blank",y.appendChild(k),v&&(k.href=v);var _=null;!!g?(_=document.createElement("img"),k?(_.className="gp-control-attribution-image",k.appendChild(_)):(_.className="",y.appendChild(_)),_.src=g,_.title=h||w,_.style.height="30px",_.style.width="30px"):k.textContent=w||(h||(v||"")),o.push(y.innerHTML+" ")}}return o},intersects:function(e,t){var o=e[1]<=t[3]&&t[1]<=e[3],n=e[2]<=t[0]&&t[2]<=e[0];return o&&n}};t.a=n},31:function(e,t,o){"use strict";var n=o(5),i=o(30),l=n.a.getLogger("layer-event"),r={_id:null,_attributions:[],_visibility:!0,_originators:[],isEnable:function(e){return!!e.attributionControl},setVisible:function(e){l.log("visibility",e),this._visibility=e,this.fire("visibilitychange")},getVisible:function(){return this._visibility},_onRemoveLayer:function(e){l.trace("onRemove event",e),e.layer._geoportal_id===this._geoportal_id&&this.setVisible(!1)},_onAddLayer:function(e){l.trace("onAdd event",e),e.layer._geoportal_id===this._geoportal_id&&this.setVisible(!0)},_onMoveEndLayer:function(e){l.trace("moveend event",e),this.updateAttributions(this._map,this)},updateAttributions:function(e){this.isEnable(e)&&(this.removeAttributions(e),this.addAttributions(e),this.fire("attributionchange"))},removeAttributions:function(e){if(l.trace("removeAttributions...",this._geoportal_id),this.isEnable(e)){for(var t=0;t<this._attributions.length;t++)e.attributionControl.removeAttribution(this._attributions[t]);this._attributions=[]}},addAttributions:function(e){if(l.trace("addAttributions...",this._geoportal_id),this.isEnable(e)){var t=e.getBounds().getNorthWest(),o=e.getBounds().getSouthEast(),n={extent:[t.lat,t.lng,o.lat,o.lng],zoom:e.getZoom(),originators:this._originators,visibility:this._visibility};l.log(n);var r=i.a.getAttributions(n);if(l.log(r),r&&0!==r.length)for(var a=0;a<r.length;a++)this._attributions.push(r[a]),e.attributionControl.addAttribution(r[a])}}};t.a=r},5:function(e,t,o){"use strict";var n=o(6),i={getLogger:function(e){"true".match(/true/)?n.disableAll():n.enableAll();var t=e||"default";return n.getLogger(t)},disableAll:function(){var e=n.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].disableAll()}},enableAll:function(){var e=n.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].enableAll()}}};t.a=i},55:function(e,t,o){"use strict";o.r(t);var n=o(7),i=o(0),l=o.n(i),r=o(5),a=o(31),s=o(23),c=r.a.getLogger("wmts"),p=l.a.TileLayer.extend({includes:a.a,defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixset:"PM",format:"image/jpeg"},initialize:function(e,t){c.log("initialize"),this._wmtsParams={},l.a.Util.extend(this._wmtsParams,this.defaultWmtsParams,t.paramsWmts),l.a.TileLayer.prototype.initialize.call(this,n.a.normalyzeUrl(e,{"gp-leaflet-ext":s.leafletExtVersion||s.version},!1),t.paramsNative),this._originators=t.originators,this._legends=t.legends,this._metadata=t.metadata,this._title=t.title,this._description=t.description,this._quicklookUrl=t.quicklookUrl,this._geoportal_id=0},onAdd:function(e){c.trace("onAdd layer",this._geoportal_id),this._map=e,this._geoportal_id=l.a.stamp(this),l.a.TileLayer.prototype.onAdd.call(this,e),this.setVisible(!0),this.updateAttributions(e),e.on({overlayremove:this._onRemoveLayer,overlayadd:this._onAddLayer,layerremove:this._onRemoveLayer,layeradd:this._onAddLayer,moveend:this._onMoveEndLayer},this)},onRemove:function(e){c.trace("onRemove layer",this._geoportal_id),this._map=e,l.a.TileLayer.prototype.onRemove.call(this,e),this.setVisible(!1),this.removeAttributions(e),e.off({overlayremove:this._onRemoveLayer,overlayadd:this._onAddLayer,layerremove:this._onRemoveLayer,layeradd:this._onAddLayer,moveend:this._onMoveEndLayer},this)},getTileUrl:function(e){var t=this._getZoomForUrl(),o=l.a.Util.template(this._url,{s:this._getSubdomain(e)});return o+l.a.Util.getParamString(this._wmtsParams,o)+"&tilematrix="+t+"&tilerow="+e.y+"&tilecol="+e.x},setParams:function(e,t){return l.a.extend(this._wmtsParams,e),t||this.redraw(),this}});t.default=p},6:function(e,t,o){var n,i;!function(l,r){"use strict";void 0===(i="function"==typeof(n=function(){var e=function(){},t="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function n(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(o){return"debug"===o&&(o="log"),"undefined"!=typeof console&&("trace"===o&&t?i:void 0!==console[o]?n(console,o):void 0!==console.log?n(console,"log"):e)}function r(t,n){for(var i=0;i<o.length;i++){var l=o[i];this[l]=i<t?e:this.methodFactory(l,t,n)}this.log=this.debug}function a(e,t,o){return function(){"undefined"!=typeof console&&(r.call(this,t,o),this[e].apply(this,arguments))}}function s(e,t,o){return l(e)||a.apply(this,arguments)}function c(e,t,n){var i,l=this;t=null==t?"WARN":t;var a="loglevel";function c(){var e;if("undefined"!=typeof window&&a){try{e=window.localStorage[a]}catch(e){}if(void 0===e)try{var t=window.document.cookie,o=t.indexOf(encodeURIComponent(a)+"=");-1!==o&&(e=/^([^;]+)/.exec(t.slice(o))[1])}catch(e){}return void 0===l.levels[e]&&(e=void 0),e}}"string"==typeof e?a+=":"+e:"symbol"==typeof e&&(a=void 0),l.name=e,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||s,l.getLevel=function(){return i},l.setLevel=function(t,n){if("string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==n&&function(e){var t=(o[e]||"silent").toUpperCase();if("undefined"!=typeof window&&a){try{return void(window.localStorage[a]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(a)+"="+t+";"}catch(e){}}}(t),r.call(l,t,e),"undefined"==typeof console&&t<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(e){t=e,c()||l.setLevel(e,!1)},l.resetLevel=function(){l.setLevel(t,!1),function(){if("undefined"!=typeof window&&a){try{return void window.localStorage.removeItem(a)}catch(e){}try{window.document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var p=c();null==p&&(p=t),l.setLevel(p,!1)}var p=new c,d={};p.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new c(e,p.getLevel(),p.methodFactory)),t};var u="undefined"!=typeof window?window.log:void 0;return p.noConflict=function(){return"undefined"!=typeof window&&window.log===p&&(window.log=u),p},p.getLoggers=function(){return d},p.default=p,p})?n.call(t,o,t,e):n)||(e.exports=i)}()},7:function(e,t,o){"use strict";var n={normalyzeParameters:function(e){var t=null;if(e){var o=[];for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i||(i=""),o.push(n+"="+i)}t=o.join("&")}return t},normalyzeUrl:function(e,t,o){var n=e;if(e){var i=e.indexOf("?");-1===i&&(n+="?"),-1!==i&&i!==e.length-1&&(n+="&")}return t&&(n+="string"==typeof t?t:this.normalyzeParameters(t)),o&&(n=encodeURIComponent(n)),n},indent:function(e,t){return new Array((e||0)+1).join("\t")+t}};t.a=n}}).default;