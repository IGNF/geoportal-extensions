{{#extend "ol-sample-bundle-multikeys-layout"}}

{{#content "head"}}
        <title>Sample openlayers Styles Mapbox</title>
{{/content}}

{{#content "style"}}
        <style>
            body {
                margin: unset;
            }
        </style>
{{/content}}

{{#content "body"}}
            <h2>Ajout du widget d'Ã©dition des styles MapBox</h2>
            <button id="displayFalse">Hidden</button>
            <button id="displayTrue">Show</button>
            <div id="style"></div>
{{/content}}

{{#content "js"}}
            <script type="text/javascript">

            // style vide et target par defaut
            var style0 = new ol.style.editor.Style();
            style0.add();

            // style vide
            var style1 = new ol.style.editor.Style({
                target: document.getElementById("style"),
                position : 1,
            });
            style1.add();

            // style paint
            var style2 = new ol.style.editor.Style({
                position : 2,
                obj: {
                    "paint": {
                      "fill-color": "#0F78B4",
                      "fill-opacity": 0.7
                    }
                },
            });
            style2.add();

            // style layout
            var style3 = new ol.style.editor.Style({
                position : 3,
                obj: {
                    "layout": {
                      "visibility": "none",
                      "text-field": [
                        "concat",
                        [
                          "get",
                          "STATE_ABBR"
                        ],
                        "\n",
                        [
                          "get",
                          "STATE_NAME"
                        ]
                      ],
                      "icon-image": "accommodation_camping",
                      "icon-size": 1,
                      "text-size": 12,
                      "text-justify": "center",
                      "text-font": [
                        "Arial Normal",
                        "sans-serif Normal"
                      ]
                    }
                },
            });
            style3.add();
            eventbus.addEventListener("editor:style:scale:onchangemin", function (e) {
                console.log("Add a listener on event 'editor:style:scale:onchangemin' : message !", e);
                if (e.target.data.position === 3) {
                    console.log("Event on position 3 !");
                }
            });

            // style layout + paint
            var style4 = new ol.style.editor.Style({
                position : 4,
                obj: {
                    "paint": {
                      "fill-color": "#0F78B4",
                      "fill-opacity": 0.7
                    },
                    "layout": {
                      "visibility": "none",
                      "text-field": [
                        "concat",
                        [
                          "get",
                          "STATE_ABBR"
                        ],
                        "\n",
                        [
                          "get",
                          "STATE_NAME"
                        ]
                      ],
                      "icon-image": "accommodation_camping",
                      "icon-size": 1,
                      "text-size": 12,
                      "text-justify": "center",
                      "text-font": [
                        "Arial Normal",
                        "sans-serif Normal"
                      ]
                    }
                },
            });
            style4.add();
            // style paint complexe
            var style5 = new ol.style.editor.Style({
                position : 5,
                obj : {
                    "paint": {
                        "fill-color": [
                            "match",
                            ["get","symbo"],
                            "ZONE_BOISEE","#A7DA81",
                            "ZONE_FORET_OUVERTE","#A7DA81",
                            "ZONE_PEUPLERAIE","#A7DA81",
                            "ZONE_FORET_FERMEE_FEUIL","#80A664",
                            "ZONE_FORET_FERMEE_CONI","#80A664",
                            "ZONE_FORET_FERMEE_MIXTE","#80A664",
                            "ZONE_LANDE_LIGNEUSE","#D5D897",
                            "ZONE_VIGNE","#DED2EE",
                            "ZONE_VERGER","#BBD8CB",
                            "ZONE_CANNE_BANANE","#EEE3A2",
                            "ZONE_MARAIS","#7E8AB5",
                            "ZONE_MARAIS_SALANT","#7E8AB5",
                            "ZONE_MANGROVE","#7E8AB5",
                            "#A7DA81"
                        ]
                    }
                }
            });
            style5.add();
            document.getElementById("displayTrue").addEventListener("click", function () {
                style0.display(true);
                style1.display(true);
                style2.display(true);
                style3.display(true);
                style4.display(true);
                style5.display(true);
            });

            document.getElementById("displayFalse").addEventListener("click", function () {
                style0.display(false);
                style1.display(false);
                style2.display(false);
                style3.display(false);
                style4.display(false);
                style5.display(false);
            });
            </script>
{{/content}}
{{/extend}}
