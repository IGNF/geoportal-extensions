{{#extend "ol-sample-bundle-layout"}}

{{#content "head"}}
        <title>Sample openlayers Legend Mapbox</title>
{{/content}}

{{#content "style"}}
        <style>
            body {
                margin: unset;
            }
        </style>
{{/content}}

{{#content "body"}}
            <h2>Ajout du widget d'Ã©dition des legendes MapBox</h2>
            <button id="displayFalse">Hidden</button>
            <button id="displayTrue">Show</button>
            <div id="legend"></div>
{{/content}}

{{#content "js"}}
            <script type="text/javascript">

            // legend vide
            var legend0 = new ol.style.editor.Legend({
                target: document.getElementById("legend")
            });
            legend0.add();

            // legend vide et target par defaut
            var legend1 = new ol.style.editor.Legend();
            legend1.add();

            // legend simple
            var legend21 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test fill...",
                    "paint": {
                         "fill-color" : "#2BB3E1",
                         "fill-opacity" : 0.5
                    }
                },
            });
            legend21.add();

            var legend22 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test line...",
                    "paint": {
                         "line-color" : "#2BB3E1",
                         "line-width" : 1,
                         "line-opacity" : 0.5
                    }
                },
            });
            legend22.add();

            var legend23 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test circle...",
                    "paint": {
                         "circle-radius": 5,
                         "circle-opacity": 0.5,
                         "circle-color": "#2BB3E1",
                         "circle-stroke-width": 2,
                         "circle-stroke-color": "rgba(255, 0, 0, 1)"
                    }
                },
            });
            legend23.add();

            var legend24 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test background...",
                    "paint": {
                         "background-color" : "#2BB3E1"
                    }
                },
            });
            legend24.add();

            var legend25 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test text...",
                    "layout": {
                        "text-field" : "..."
                    },
                    "paint": {
                         "text-color" : "#2BB3E1"
                    }
                },
            });
            legend25.add();

            var legend26 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test icon...",
                    "layout": {
                        "icon-image" : "..."
                    },
                    "paint": {
                        "icon-color": "#A7DA81"
                    }
                },
            });
            legend26.add();

            var legend27 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test text (non reconnu comme texte ou icone)...",
                    "paint": {
                        "text-size" : "3px"
                    }
                },
            });
            legend27.add();

            var legend28 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test text (on layout)...",
                    "layout": {
                        "text-field" : "..."
                    }
                },
            });
            legend28.add();

            var legend29 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test icon (on sprite), not correctly implemented...",
                    "layout": {
                        "icon-image" : "onSpriteIcons.png"
                    }
                },
            });
            legend29.add();

            // legend complexe
            var legend3 = new ol.style.editor.Legend({
                target: document.getElementById("legend"),
                obj: {
                    "title" : "test fill (array), not yet implemented...",
                    paint : {
                        "fill-color": [
                            "match",
                            ["get","symbo"],
                            "ZONE_BOISEE","#A7DA81",
                            "ZONE_MANGROVE","#7E8AB5",
                            "#A7DA81"
                        ]
                    }
                },
            });
            legend3.add();

            var legend4 = new ol.style.editor.Legend({
                target: document.getElementById("legend"),
                obj: {
                    "title" : "test fill (object), not yet implemented...",
                    "paint": {
                        "fill-color": {
                            color : "#A7DA81"
                        }
                    }
                },
            });
            legend4.add();

            var legend5 = new ol.style.editor.Legend({
                position : 5,
                obj: {
                    "title" : "test line editable...",
                    "editable" : true,
                    "paint": {
                         "line-color" : "#2BB3E1",
                         "line-width" : 1,
                         "line-opacity" : 0.5
                    }
                },
            });
            legend5.add();
            eventbus.addEventListener("editor:legend:onclickvisibility", function (e) {
                console.log("Add a listener on event 'editor:legend:onclickvisibility' : switch display !", e);
                if (e.target.data.position === 5) {
                    console.log("Event on position 5 !");
                    var b = legend5.display();
                    legend5.display(!b);
                }
            });

            var legend6 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test circle editable, not yet implemented...",
                    "editable" : true,
                    "paint": {
                         "circle-radius": 5,
                         "circle-opacity": 0.5,
                         "circle-color": "#2BB3E1",
                         "circle-stroke-width": 2,
                         "circle-stroke-color": "rgba(255, 0, 0, 1)"
                    }
                },
            });
            legend6.add();

            var legend7 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test fill editable...",
                    "editable" : true,
                    "paint": {
                         "fill-color" : "#2BB3E1",
                         "fill-opacity" : 0.5
                    }
                },
            });
            legend7.add();

            var legend8 = new ol.style.editor.Legend({
                obj: {
                    "title" : "test type non reconnu..., par defaut, fill...",
                    "editable" : true,
                    "paint": {
                         "bidon-color" : "#2BB3E1",
                         "bidon-opacity" : 0.5
                    }
                },
            });
            legend8.add();

            document.getElementById("displayTrue").addEventListener("click", function () {
                legend3.display(true);
                legend4.display(true);
                legend5.display(true);
                legend6.display(true);
                legend7.display(true);
                legend8.display(true);
            });

            document.getElementById("displayFalse").addEventListener("click", function () {
                legend3.display(false);
                legend4.display(false);
                legend5.display(false);
                legend6.display(false);
                legend7.display(false);
                legend8.display(false);
            });

            </script>
{{/content}}
{{/extend}}
