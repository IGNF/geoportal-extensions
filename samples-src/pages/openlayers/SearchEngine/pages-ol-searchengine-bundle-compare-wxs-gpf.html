{{#extend "ol-sample-bundle-multikeys-layout"}}

{{#content "head"}}
<title>Sample openlayers SearchEngine</title>
{{/content}}

{{#content "style"}}
<style>
    div#map {
        width: 100%;
        height: 500px;
    }

    div#se1 {
        width: 50%;
        height: 300px;
        float: left;
    }

    div#se2 {
        width: 50%;
        height: 300px;
        float: right;
    }

    div[id^="GPsearchEngine-"] {
        position: relative;
    }
</style>
{{/content}}

{{#content "body"}}
<h2>Ajout du moteur de recherche avec les options par défaut pour comparer autocomplétion et geocodage WXS/GPF</h2>
<p>La recherche avancée utilise les services de geocodage. La recherche simple utilise les services d'autocomplétion.</p>
<!-- map -->
<div id="map">
</div>
<div id="searchEngines">

    <div id="se1">
        <div class="titles">WXS</div>
    </div>

    <div id="se2">
        <div class="titles">GPF</div>
    </div>
</div>
{{/content}}

{{#content "js"}}
<script type="text/javascript">
    var map;
    window.onload = function () {
        var se1 = document.getElementById("se1");
        var se2 = document.getElementById("se2");
        // on cache l'image de chargement du Géoportail.
        document.getElementById('map').style.backgroundImage = 'none';

        // 1. Création de la map
        map = new ol.Map({
            target: "map",
            view: new ol.View({
                center: [288074.8449901076, 6247982.515792289],
                zoom: 6
            }),
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.GeoportalWMTS({
                        layer: "GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR40"
                    })
                })
            ]
        });

        // 2. Appel du SearchEngine
        var searchWXS = new ol.control.SearchEngine({
            target: se1,
            collapsed: false,
            displayAdvancedSearch: true,
            geocodeOptions: {
                serviceOptions: {
                    maximumResponses: 15,
                    oldGeocodeService: true
                }
            },
            autocompleteOptions: {
                serviceOptions: {
                    maximumResponses: 15,
                    oldAutocompleteService: true
                }
            }
        });

        var searchGPF = new ol.control.SearchEngine({
            target: se2,
            collapsed: false,
            displayAdvancedSearch: true,
            geocodeOptions: {
                serviceOptions: {
                    maximumResponses: 15
                }
            },
            autocompleteOptions: {
                serviceOptions: {
                    maximumResponses: 15
                }
            }
        });

        // 3. Ajout du SearchEngine à la carte
        map.addControl(searchWXS);
        map.addControl(searchGPF);

    };
</script>
{{/content}}

{{/extend}}