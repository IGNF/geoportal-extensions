{% extends "leaflet/leaflet-sample-amd-layout.html" %}

{% block head %}
        <title>Sample Leaflet MousePosition</title>
{% endblock %}

{% block style %}
        <style>
            div#map {
                width: 100%;
                height: 500px;
            }
        </style>
{% endblock %}

{% block body %}
        <h2>Ajout du Widget d'affichage des coordonn√©es de la Souris</h2>
        <!-- map -->
        <div id="map">
        </div>
{% endblock  %}

{% block js %}
        <script type="text/javascript">
            requirejs(['gp', 'Leaflet/Layers/Layers', 'Leaflet/Controls/MousePosition'], function (Gp, Layers, MousePosition) {

                Gp.Services.getConfig({
                    // serverUrl : "../resources/autoconf/callback-autoconf-xml-light-more",
                    apiKey : "jhyvi0fgmnuxvfv0zjzorvdn",
                    timeOut : 20000,
                    onSuccess : function () {

                        var wms = Layers.WMS({
                             layer : "ORTHOIMAGERY.ORTHOPHOTOS",
                        });

                        var map  = L.map('map', {
                            zoom : 2,
                            center : L.latLng(48, 2)
                        });

                        wms.addTo(map);

                        var mouse = new MousePosition();

                        map.addControl(mouse);
                    }
                })
            });
    </script>
{% endblock  %}
