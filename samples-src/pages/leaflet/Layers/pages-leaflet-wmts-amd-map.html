{{#extend "layout-leaflet-sample-amd"}}

{{#content "head"}}
        <title>Sample Leaflet</title>
{{/content}}

{{#content "style"}}
        <style>
        div#map {
            width: 100%;
            height: 500px;
        }
        </style>
{{/content}}

{{#content "body"}}
        <h2>Ajout d'une couche WMTS</h2>
        <!-- map -->
        <div id="map"></div>
{{/content}}

{{#content "js"}}
        <script type="text/javascript">
        var map;
        requirejs([
          'leaflet',
          'Gp',
        ], function (
          L,
          Gp
        ) {

                Gp.Services.getConfig({
                    customConfigFile : "https://github.com/IGNF/geoportal-configuration/blob/main/dist/essentielsConfig.json",
                    callbackSuffix : "",
                    // apiKey : "jhyvi0fgmnuxvfv0zjzorvdn",
                    timeOut : 20000,
                    /** onsuccess */
                    onSuccess : function () {

                        var wmts = L.geoportalLayer.WMTS({
                            layer : "GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2"
                        });

                        var map  = L.map("map", {
                            zoom : 2,
                            center : L.latLng(48, 2),
                            layers : [wmts]
                        });


                    }
                });
            });
            </script>
    {{/content}}
    {{/extend}}
