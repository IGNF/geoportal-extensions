<!DOCTYPE html>
<html>
<head>
  <!-- Library Ol3 -->
  <link rel="stylesheet" href="../lib/leaflet/leaflet.css" />

  <!-- Plugin leaflet IGN -->
  <link rel="stylesheet" href="../dist/leaflet/GpPluginLeaflet-src.css" />

  <!-- requirejs -->
  <script src="lib/d3.v3.min.js"></script>
  <script src="../lib/require.js"></script>

</head>
<body>
  <h1>
    <a href="http://openlayers.org/"><img src="img/logo-leaflet.png" alt="Leaflet" width="100" /></a>
    <a href="http://www.ign.fr"><img src="img/logo-ign.jpg" alt="IGN" width="100" /></a>
  </h1>
  <h3>
    Leaflet - une bibliothèque JavaScript open-source pour des cartes interactives mobile-friendly
  </h3>
  <div>
    <!-- Faire une bréve description du plugin -->
    <p>TODO : DESCRIPTION DU PLUGIN</p>

    <!-- map -->
    <div id="map" style="height: 400px;"></div>

    <!-- Mettre le code source de l'exemple -->

    <script>
    var map;
    /* global requirejs */
    requirejs.config({
      'baseUrl' : "../src/",
      'paths': {
          // lib external
          "leaflet" : "../lib/leaflet/leaflet-src",
          "leaflet-draw" : "../lib/leaflet/plugins/leaflet-draw/leaflet.draw-src",
          "gp"      : "../lib/gp/GpServices-src",
          "proj4"   : "../lib/proj4/proj4-src",
          "proj4leaflet-0.7.x" : "../lib/proj4leaflet/proj4leaflet-src",
          "proj4leaflet-1.0.x" : "../lib/proj4leaflet/1.0.0-beta.2/proj4leaflet-src",
          "woodman" : "../lib/woodman/woodman-amd",
          "sortable": "../lib/sortable/Sortable"
      },
      shim : {
        "leaflet-draw" : ["leaflet"]
      }
    });
    requirejs(
      [
        'gp',
        'Leaflet/Layers/Layers',
        'Leaflet/Controls/Route',
        'Leaflet/Controls/LayerSwitcher',
        'Leaflet/Controls/ReverseGeocoding',
        'Leaflet/Controls/MousePosition',
        'Leaflet/Controls/Isocurve',
        'Leaflet/Controls/ElevationPath',
        'Leaflet/Controls/SearchEngine'
      ],
      function (
        Gp,
        Layers,
        Route,
        LayerSwitcher,
        ReverseGeocoding,
        MousePosition,
        Isocurve,
        ElevationPath,
        SearchEngine
      ) {

        Gp.Services.getConfig({
          serverUrl : "AutoConf.js",
          callbackSuffix : "",
          // apiKey : "jhyvi0fgmnuxvfv0zjzorvdn",
          timeOut : 20000,
          onSuccess : function () {

            var wms = Layers.WMS({
              layer : "ORTHOIMAGERY.ORTHOPHOTOS",
            });

            var map  = L.map('map', {
              zoom : 2,
              center : L.latLng(48, 2)
            });

            wms.addTo(map);

            var switcher = new LayerSwitcher();
            map.addControl(switcher);
            var route = new Route();
            map.addControl(route);
            var search = new SearchEngine();
            map.addControl(search);
            var rev = new ReverseGeocoding();
            map.addControl(rev);
            var mouse = new MousePosition();
            map.addControl(mouse);
            var iso = new Isocurve();
            map.addControl(iso);

            var el = new ElevationPath({
              displayProfileOptions : {
                apply : ElevationPath.DISPLAY_PROFILE_LIB_D3
              }
            });
            map.addControl(el);
          }
      });
    });

    </script>

    <!-- Comment utiliser le plugin avec un exemple -->
    <p>TODO : EXEMPLE D'UTILISATION DU PLUGIN</p>
    <pre>
      <code>TODO : CODE DE L'EXEMPLE</code>
    </pre>

    <!-- Toutes les informations utiles sur leaflet -->
    <p>
      <ul>
        <li>En savoir plus avec le <a href="http://openlayers.org/en/v3.11.2/doc/quickstart.html">quick start guide</a>,</li>
        <li>d'autres informations avec <a href="http://openlayers.org/en/v3.11.2/examples/">les exemples</a>,</li>
        <li>ou aller directement à l'<a href="http://openlayers.org/en/v3.11.2/apidoc/">API documentation</a>.</li>
      </ul>
      Si vous avez des questions, jetez un oeil à la
      <a href="http://stackoverflow.com/questions/tagged/openlayers-3">FAQ</a>.
    </p>
  </div>
</body>
</html>
